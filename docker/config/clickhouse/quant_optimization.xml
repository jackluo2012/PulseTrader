<?xml version="1.0"?>
<clickhouse>
    <!-- 网络配置 -->
    <listen_host>0.0.0.0</listen_host>

    <!-- 系统级配置 -->
    <merge_tree>
        <max_suspicious_broken_parts>5</max_suspicious_broken_parts>
        <parts_to_delay_insert>150</parts_to_delay_insert>
        <parts_to_throw_insert>300</parts_to_throw_insert>
        <max_bytes_to_merge_at_max_space_in_pool>1048576000</max_bytes_to_merge_at_max_space_in_pool>
    </merge_tree>

    <!-- 日志配置 -->
    <logger>
        <level>warning</level>
        <console>true</console>
        <log>/var/log/clickhouse-server/clickhouse-server.log</log>
        <errorlog>/var/log/clickhouse-server/clickhouse-server.err.log</errorlog>
    </logger>

    <!-- 时区设置 -->
    <timezone>Asia/Shanghai</timezone>

    <!-- 用户配置文件 -->
    <profiles>
        <default>
            <!-- 内存配置 -->
            <max_memory_usage>10000000000</max_memory_usage>
            <max_bytes_before_external_group_by>10000000000</max_bytes_before_external_group_by>

            <!-- 并发配置 -->
            <max_threads>8</max_threads>
            <max_insert_threads>4</max_insert_threads>
        </default>
    </profiles>
</clickhouse>

