# ç¬¬ä¸€é˜¶æ®µï¼šä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒæ­å»º (WSLç‰ˆ)

> **ç›®æ ‡**: å»ºç«‹ä¼ä¸šçº§ Rust+Python é‡åŒ–äº¤æ˜“å¼€å‘ç¯å¢ƒ
> **é¢„è®¡æ—¶é—´**: 1-2å¤©
> **æäº¤æ ‡è®°**: `first-commit`
> **å¼€å‘ç¯å¢ƒ**: WSL2 + Ubuntu + Pythonè™šæ‹Ÿç¯å¢ƒ
> **ä¸“ä¸šæ ‡å‡†**: ç¬¦åˆé‡åŒ–åŸºé‡‘æŠ€æœ¯æ ˆè¦æ±‚

## ğŸ“‹ æ­¥éª¤æ¦‚è§ˆ

1. [âœ…] ç³»ç»Ÿè¦æ±‚æ£€æŸ¥
2. [ ] Rust ç¯å¢ƒå®‰è£…
3. [ ] Python ç¯å¢ƒé…ç½® (ä½¿ç”¨ç°æœ‰.venv)
4. [ ] é¡¹ç›®ç»“æ„åˆ›å»º
5. [ ] å¼€å‘å·¥å…·é…ç½®
6. [ ] ç¯å¢ƒéªŒè¯æµ‹è¯•

---

## æ­¥éª¤ 1: ç³»ç»Ÿè¦æ±‚æ£€æŸ¥

### 1.1 æ“ä½œç³»ç»Ÿæ”¯æŒ
- âœ… **WSL2 + Ubuntu** (å½“å‰ç¯å¢ƒ)
- âœ… **Linux** (Ubuntu 20.04+, CentOS 8+)
- âœ… **macOS** (10.15+)
- âœ… **Windows 10/11** (éœ€è¦å®‰è£…WSL2)

### 1.2 ç¡¬ä»¶è¦æ±‚
- **å†…å­˜**: 32GB+ (æ¨è 64GB) - é‡åŒ–å›æµ‹å’Œæ•°æ®å¤„ç†éœ€è¦å¤§å†…å­˜
- **å­˜å‚¨**: 100GB+ SSD (æ¨è NVMe) - é«˜é€ŸI/Oå¯¹æ—¶åºæ•°æ®å¤„ç†è‡³å…³é‡è¦
- **CPU**: 8æ ¸+ (æ¨è 16æ ¸) - å¹¶è¡Œè®¡ç®—å’Œç­–ç•¥å›æµ‹
- **ç½‘ç»œ**: ä½å»¶è¿Ÿè¿æ¥ (æ¨èä¸“çº¿) - å®æ—¶äº¤æ˜“è¦æ±‚

### 1.3 å¿…éœ€è½¯ä»¶
- **Git**: ç‰ˆæœ¬æ§åˆ¶
- **Python**: 3.11+ (æ¨è 3.12) - **å·²å®‰è£…**
- **Rust**: 1.75+ (æœ€æ–°ç¨³å®šç‰ˆ) - **å·²å®‰è£…**
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **ClickHouse**: æ—¶åºæ•°æ®åº“ (ç”Ÿäº§ç¯å¢ƒ)
- **Redis**: å†…å­˜æ•°æ®åº“ (ç¼“å­˜å’Œå®æ—¶æ•°æ®)
- **PostgreSQL**: å…³ç³»å‹æ•°æ®åº“ (å…ƒæ•°æ®ç®¡ç†)

**æ£€æŸ¥å‘½ä»¤**:
```bash
# æ£€æŸ¥ç³»ç»Ÿä¿¡æ¯ (WSL)
uname -a
python --version  # å·²æœ‰Python 3.11.14
git --version
rustc --version   # å·²æœ‰Rust 1.90.0
cargo --version

# æ£€æŸ¥ä¸“ä¸šè½¯ä»¶
docker --version
docker-compose --version
redis-server --version
clickhouse-client --version
psql --version
```

---

## æ­¥éª¤ 2: Rust ç¯å¢ƒå®‰è£…

### 2.1 Rust ç¯å¢ƒçŠ¶æ€
âœ… **Rust 1.90.0 å·²å®‰è£…å¹¶å¯ç”¨**ï¼Œæ— éœ€é‡å¤å®‰è£…ã€‚

å¦‚æœéœ€è¦æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š
```bash
# æ›´æ–° Rust åˆ°æœ€æ–°ç‰ˆæœ¬
rustup update

# æ£€æŸ¥å½“å‰ç‰ˆæœ¬
rustc --version  # å½“å‰: 1.90.0
cargo --version
```

### 2.2 WSL ç¯å¢ƒä¸‹çš„ Rust é…ç½®éªŒè¯

```bash
# éªŒè¯ Rust ç¯å¢ƒå˜é‡
which rustc
which cargo
echo $PATH | grep cargo

# æ£€æŸ¥ Rust å·¥å…·é“¾çŠ¶æ€
rustup show
rustup toolchain list
```

### 2.3 å®‰è£… Rust ä¸“ä¸šå¼€å‘å·¥å…·

```bash
# å®‰è£…å¸¸ç”¨ç»„ä»¶
rustup component add rustfmt clippy rust-analyzer

# å®‰è£…é‡åŒ–å¼€å‘ä¸“ç”¨å·¥å…·
cargo install cargo-watch          # è‡ªåŠ¨é‡æ–°ç¼–è¯‘
cargo install cargo-expand         # å®å±•å¼€å·¥å…·
cargo install maturin              # Python Rust æ··åˆå¼€å‘å·¥å…·
cargo install cargo-criterion       # æ€§èƒ½åŸºå‡†æµ‹è¯•
cargo install cargo-flamegraph      # æ€§èƒ½åˆ†æå·¥å…·
cargo install cargo-audit           # å®‰å…¨å®¡è®¡
cargo install cargo-deny           # ä¾èµ–å®‰å…¨æ£€æŸ¥
cargo install tokio-console        # å¼‚æ­¥ä»»åŠ¡ç›‘æ§
```

### 2.4 WSL ç¯å¢ƒä¸‹ Cargo ä¼˜åŒ–é…ç½®

åˆ›å»º `~/.cargo/config.toml` æ–‡ä»¶ï¼š

```toml
# ~/.cargo/config.toml

[build]
# å¯ç”¨å¹¶è¡Œç¼–è¯‘ (WSLç¯å¢ƒä¸‹å¯ä»¥é€‚å½“å¢åŠ )
jobs = 6

[target.x86_64-unknown-linux-gnu]
# WSL/Linux ä¼˜åŒ–é…ç½®
rustflags = ["-C", "target-cpu=native"]

[registry]
# ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿä¸‹è½½ (æ¨èåœ¨WSLç¯å¢ƒä¸‹ä½¿ç”¨)
index = "https://mirrors.ustc.edu.cn/crates.io-index/"

[source.crates-io]
replace-with = 'ustc'

[source.ustc]
registry = "https://mirrors.ustc.edu.cn/crates.io-index"
```

---

## æ­¥éª¤ 3: Python ç¯å¢ƒé…ç½® (ä½¿ç”¨ç°æœ‰è™šæ‹Ÿç¯å¢ƒ)

### 3.1 Python ç¯å¢ƒçŠ¶æ€
âœ… **Python 3.11.14 å·²å®‰è£…**
âœ… **.venv è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»º**ï¼Œæ— éœ€é‡å¤åˆ›å»º

### 3.2 æ¿€æ´»ç°æœ‰è™šæ‹Ÿç¯å¢ƒ

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
pwd  # åº”è¯¥æ˜¾ç¤º /home/jackluo/PulseTrader

# æ¿€æ´»ç°æœ‰è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# éªŒè¯æ¿€æ´»çŠ¶æ€
which python
# åº”è¯¥æ˜¾ç¤º: /home/jackluo/PulseTrader/.venv/bin/python

python --version
# åº”è¯¥æ˜¾ç¤º: Python 3.11.14
```

### 3.3 ä½¿ç”¨ Poetry ç®¡ç†é‡åŒ–ä¸“ä¸šä¾èµ–

æˆ‘ä»¬å°†ä½¿ç”¨ Poetry æ¥ç®¡ç† Python ä¾èµ–ï¼Œé›†æˆé‡åŒ–åŸºé‡‘æ ‡å‡†æŠ€æœ¯æ ˆï¼š

```bash
# ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥ Poetry æ˜¯å¦å·²å®‰è£…
poetry --version

# å¦‚æœ Poetry æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…ï¼š
# curl -sSL https://install.python-poetry.org | python3 -

# ç¬¬äºŒæ­¥ï¼šé…ç½® Poetry ä½¿ç”¨ç°æœ‰çš„ .venv è™šæ‹Ÿç¯å¢ƒ
poetry config virtualenvs.in-project true
poetry config virtualenvs.create false

# ç¬¬ä¸‰æ­¥ï¼šé…ç½®ä¸“ä¸šé•œåƒæº (æé«˜ä¸‹è½½é€Ÿåº¦)
poetry source add --priority=primary tsinghua https://pypi.tuna.tsinghua.edu.cn/simple/

# ç¬¬å››æ­¥ï¼šæ·»åŠ æ ¸å¿ƒæ•°æ®ç§‘å­¦ä¾èµ–
poetry add pandas numpy scipy scikit-learn
poetry add polars pyarrow datasets
poetry add matplotlib plotly seaborn bokeh
poetry add numba cython

# ç¬¬äº”æ­¥ï¼šæ·»åŠ é‡åŒ–äº¤æ˜“ä¸“ç”¨ä¾èµ–
poetry add tushare akshare pytdx ccxt
poetry add zipline-reloaded backtrader vectorbt
poetry add quantlib pyfolio empyrical

# ç¬¬å…­æ­¥ï¼šæ·»åŠ é«˜æ€§èƒ½æ•°æ®åº“è¿æ¥å™¨
poetry add clickhouse-driver redis psycopg2-binary sqlalchemy
poetry add aiohttp httpx websockets

# ç¬¬ä¸ƒæ­¥ï¼šæ·»åŠ æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ 
poetry add torch torchvision torchaudio
poetry add tensorflow-cpu
poetry add xgboost lightgbm catboost
poetry add scikit-optimize optuna hyperopt

# ç¬¬å…«æ­¥ï¼šæ·»åŠ WebæœåŠ¡å’Œé«˜æ€§èƒ½è®¡ç®—
poetry add fastapi uvicorn celery
poetry add ray[dask] modin
poetry add dask[complete] distributed

# ç¬¬ä¹æ­¥ï¼šæ·»åŠ å¼€å‘å’Œè´¨é‡ä¿è¯å·¥å…·
poetry add --group dev maturin pytest pytest-cov pytest-benchmark
poetry add --group dev black isort flake8 mypy pre-commit
poetry add --group dev bandit safety semgrep

# ç¬¬åæ­¥ï¼šæ·»åŠ æ€§èƒ½åˆ†æå’Œç›‘æ§
poetry add --group dev py-spy memory-profiler
poetry add --group dev prometheus-client grafana-api

# ç¬¬åä¸€æ­¥ï¼šæ·»åŠ å¯é€‰ä¾èµ–ï¼ˆç ”ç©¶å’Œå¼€å‘ï¼‰
poetry add --group research jupyter notebook ipykernel
poetry add --group research nbconvert nbformat
poetry add --group research papermill jupytext

# ç¬¬åäºŒæ­¥ï¼šå®‰è£…æ‰€æœ‰ä¾èµ–
poetry install --all-extras
```

### 3.4 éªŒè¯ Poetry ç¯å¢ƒ

```bash
# æ£€æŸ¥ Poetry é…ç½®
poetry config --list

# æŸ¥çœ‹å·²å®‰è£…çš„ä¾èµ–
poetry show

# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒè·¯å¾„
poetry env info

# éªŒè¯å¯ä»¥æ¿€æ´»ç¯å¢ƒ
poetry run python --version
poetry run which python

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœéœ€è¦ç›´æ¥ä½¿ç”¨ï¼‰
source .venv/bin/activate
```

---

## æ­¥éª¤ 4: é¡¹ç›®ç»“æ„åˆ›å»º

### 4.1 åˆ›å»ºä¸“ä¸šé‡åŒ–é¡¹ç›®ç»“æ„

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½• (/home/jackluo/PulseTrader) ä¸‹æ‰§è¡Œ

# Rust é«˜æ€§èƒ½å¼•æ“ç›®å½•
mkdir -p engine/src/{data,indicators,risk,execution,ffi,utils,benchmarks}
mkdir -p engine/tests/{unit,integration,performance}
mkdir -p engine/benches
mkdir -p engine/examples

# Python ç­–ç•¥å’Œåˆ†æå±‚
mkdir -p pulse_trader/{engine,strategies,backtest,analysis,utils,monitoring}
mkdir -p pulse_trader/strategies/{mean_reversion,trend_following,arbitrage,ml}
mkdir -p pulse_trader/data/{connectors,processors,storage,quality}
mkdir -p pulse_trader/research/{notebooks,experiments,results}
mkdir -p pulse_trader/execution/{brokers,exchanges,risk_management}

# æ•°æ®æ¹–æ¶æ„ (åˆ†å±‚å­˜å‚¨)
mkdir -p data/{raw,bronze,silver,gold}
mkdir -p data/raw/{market,fundamental,alternative,news}
mkdir -p data/bronze/{tick,minute,daily,fundamentals}
mkdir -p data/silver/{cleaned,enriched,features}
mkdir -p data/gold/{signals,portfolios,performance}
mkdir -p data/cache/{redis,clickhouse,parquet}
mkdir -p data/logs/{application,trading,audit,performance}

# ç ”ç©¶å’Œå¼€å‘ç¯å¢ƒ
mkdir -p research/{notebooks,experiments,backtests,papers}
mkdir -p deployment/{docker,kubernetes,monitoring}
mkdir -p monitoring/{prometheus,grafana,alerts,logs}
mkdir -p docs/{api,architecture,research,deployment}

# é…ç½®ç®¡ç† (ç¯å¢ƒåˆ†ç¦»)
mkdir -p config/{dev,staging,prod}
mkdir -p config/secrets

# è´¨é‡ä¿è¯å’ŒCI/CD
mkdir -p quality/{tests,benchmarks,security,linting}
mkdir -p scripts/{setup,deployment,monitoring,data_ingestion}

# åˆ›å»º .gitkeep æ–‡ä»¶ä¿æŒç©ºç›®å½•
find data -type d -exec touch {}/.gitkeep \;
find research -type d -exec touch {}/.gitkeep \;
find monitoring -type d -exec touch {}/.gitkeep \;
```

### 4.2 åˆå§‹åŒ–é«˜æ€§èƒ½ Rust å¼•æ“

```bash
# è¿›å…¥ engine ç›®å½•å¹¶åˆå§‹åŒ–
cd engine
cargo init --lib

# éªŒè¯åˆå§‹åŒ–
ls -la  # åº”è¯¥çœ‹åˆ° Cargo.toml å’Œ src/ ç›®å½•
cat src/lib.rs  # åº”è¯¥æœ‰åŸºç¡€çš„ Rust ä»£ç 

# æ·»åŠ é‡åŒ–ä¸“ä¸šä¾èµ–åŒ…

# ç¬¬ä¸€æ­¥ï¼šPython ç»‘å®šå’Œç§‘å­¦è®¡ç®—
cargo add pyo3 --features "extension-module abi3-py311"
cargo add numpy
cargo add nalgebra
cargo add ndarray

# ç¬¬äºŒæ­¥ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†
cargo add polars --features "lazy temporal strings streaming"
cargo add arrow --features "ipc prettyprint"
cargo add parquet
cargo add serde --features "derive"
cargo add serde_json
cargo add rmp-serde  # MessagePackåºåˆ—åŒ–

# ç¬¬ä¸‰æ­¥ï¼šå¼‚æ­¥è¿è¡Œæ—¶å’Œå¹¶å‘
cargo add tokio --features "full sync"
cargo add tokio-util --features "codec"
cargo add futures
cargo add rayon

# ç¬¬å››æ­¥ï¼šæ•°å­¦å’Œç»Ÿè®¡åº“
cargo add num-complex
cargo add ordered-float
cargo add statrs
cargo add approx
cargo add rand --features "serde1"

# ç¬¬äº”æ­¥ï¼šç½‘ç»œå’Œé€šä¿¡
cargo add reqwest --features "json socks5 cookies"
cargo add tungstenite --features "native-tls"
cargo add tokio-tungstenite
cargo add tonic  # gRPC

# ç¬¬å…­æ­¥ï¼šæ•°æ®åº“è¿æ¥å™¨
cargo add clickhouse --features "tls"
cargo add redis --features "tokio-comp"
cargo add sqlx --features "runtime-tokio-rustls postgres sqlite"

# ç¬¬ä¸ƒæ­¥ï¼šé”™è¯¯å¤„ç†å’Œæ—¥å¿—
cargo add anyhow
cargo add thiserror
cargo add tracing
cargo add tracing-subscriber --features "env-filter json"
cargo add sentry-tracing  # é”™è¯¯ç›‘æ§

# ç¬¬å…«æ­¥ï¼šé…ç½®å’Œæ—¶é—´å¤„ç†
cargo add chrono --features "serde"
cargo add config
cargo add toml
cargo add humantime-serde

# ç¬¬ä¹æ­¥ï¼šæ€§èƒ½åˆ†æå’ŒåŸºå‡†æµ‹è¯•
cargo add --dev criterion --features "html_reports black_box"
cargo add --dev divan
cargo add --dev proptest  # å±æ€§æµ‹è¯•
cargo add --dev tempfile

# åˆ›å»ºä¼˜åŒ–çš„ Cargo.toml é…ç½®
cat > Cargo.toml << 'EOF'
[package]
name = "pulse_trader_engine"
version = "0.1.0"
edition = "2021"
authors = ["PulseTrader Team"]
license = "MIT"
description = "é«˜æ€§èƒ½é‡åŒ–äº¤æ˜“å¼•æ“"

[lib]
name = "pulse_trader_engine"
crate-type = ["cdylib", "rlib"]

[[bench]]
name = "indicators"
harness = false

[[bench]]
name = "backtest"
harness = false

[[bench]]
name = "risk_metrics"
harness = false

[dependencies]
# Python ç»‘å®š
pyo3 = { version = "0.21", features = ["extension-module", "abi3-py311"] }
numpy = "0.21"
nalgebra = "0.33"
ndarray = "0.16"

# é«˜æ€§èƒ½æ•°æ®å¤„ç†
polars = { version = "0.42", features = ["lazy", "temporal", "strings", "streaming"] }
arrow = { version = "53", features = ["ipc", "prettyprint"] }
parquet = "53"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
rmp-serde = "1.1"

# å¼‚æ­¥è¿è¡Œæ—¶
tokio = { version = "1.0", features = ["full", "sync"] }
tokio-util = { version = "0.7", features = ["codec"] }
futures = "0.3"
rayon = "1.10"

# æ•°å­¦ç»Ÿè®¡
num-complex = "0.4"
ordered-float = "4.2"
statrs = "0.17"
approx = "0.5"
rand = { version = "0.8", features = ["serde1"] }

# ç½‘ç»œé€šä¿¡
reqwest = { version = "0.12", features = ["json", "socks5", "cookies"] }
tungstenite = { version = "0.24", features = ["native-tls"] }
tokio-tungstenite = "0.24"
tonic = "0.12"

# æ•°æ®åº“
clickhouse = { version = "0.12", features = ["tls"] }
redis = { version = "0.26", features = ["tokio-comp"] }
sqlx = { version = "0.8", features = ["runtime-tokio-rustls", "postgres", "sqlite"] }

# é”™è¯¯å¤„ç†å’Œæ—¥å¿—
anyhow = "1.0"
thiserror = "2.0"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }
sentry-tracing = "0.3"

# é…ç½®å’Œæ—¶é—´
chrono = { version = "0.4", features = ["serde"] }
config = "0.14"
toml = "0.8"
humantime-serde = "1.1"

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports", "black_box"] }
divan = "0.1"
proptest = "1.5"
tempfile = "3.12"
tokio-test = "0.4"

# å‘å¸ƒä¼˜åŒ–é…ç½®
[profile.release]
opt-level = 3
lto = "fat"
codegen-units = 1
panic = "abort"
strip = true

# å¼€å‘é…ç½®
[profile.dev]
opt-level = 1
debug = true

# åŸºå‡†æµ‹è¯•é…ç½®
[profile.bench]
opt-level = 3
debug = false
EOF

# éªŒè¯é…ç½®
cat Cargo.toml

# æµ‹è¯•ç¼–è¯‘
cargo check
cargo build --release

# è¿è¡Œæµ‹è¯•ç¡®ä¿ä¸€åˆ‡æ­£å¸¸
cargo test

# è¿è¡ŒåŸºå‡†æµ‹è¯• (éªŒè¯æ€§èƒ½)
cargo bench

cd ..  # è¿”å›é¡¹ç›®æ ¹ç›®å½•
```

### 4.3 é…ç½® Python é¡¹ç›®ç»“æ„

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
pwd  # åº”è¯¥æ˜¾ç¤º /home/jackluo/PulseTrader

# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
source .venv/bin/activate

# åˆ›å»º Python åŒ…çš„ __init__.py æ–‡ä»¶
touch pulse_trader/__init__.py
touch pulse_trader/engine/__init__.py
touch pulse_trader/strategies/__init__.py
touch pulse_trader/backtest/__init__.py
touch pulse_trader/analysis/__init__.py
touch pulse_trader/utils/__init__.py

# åˆ›å»º tests çš„ __init__.py æ–‡ä»¶
touch tests/__init__.py
touch tests/unit/__init__.py
touch tests/integration/__init__.py

# åˆ›å»º setup.py ç”¨äº Maturin æ„å»º
cat > setup.py << 'EOF'
from setuptools import setup
setup(
    name="pulse-trader",
    packages=["pulse_trader"],
)
EOF

# åˆ›å»º Poetry é…ç½®çš„ pyproject.toml
cat > pyproject.toml << 'EOF'
[build-system]
requires = ["maturin>=1.4,<2.0", "poetry-core>=1.0.0"]
build-backend = "maturin"

[tool.poetry]
name = "pulse-trader"
version = "0.1.0"
description = "Aè‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ"
authors = ["Your Name <your.email@example.com>"]
readme = "README.md"
packages = [{include = "pulse_trader"}]

[tool.poetry.dependencies]
python = "^3.8"
pandas = "^2.0.0"
numpy = "^1.24.0"
matplotlib = "^3.7.0"
plotly = "^5.15.0"
scikit-learn = "^1.3.0"
tushare = "^1.2.0"
akshare = "^1.9.0"
pytdx = "^1.72.0"
fastapi = "^0.100.0"
uvicorn = {extras = ["standard"], version = "^0.23.0"}
sqlalchemy = "^2.0.0"
python-dotenv = "^1.0.0"
pyyaml = "^6.0.0"

[tool.poetry.group.dev.dependencies]
maturin = "^1.4.0"
pytest = "^7.4.0"
pytest-cov = "^4.1.0"
black = "^23.7.0"
flake8 = "^6.0.0"
mypy = "^1.5.0"

[tool.poetry.group.optional.dependencies]
jupyter = "^1.0.0"
notebook = "^7.0.0"
ipykernel = "^6.25.0"

[tool.poetry.extras]
dev = ["maturin", "pytest", "pytest-cov", "black", "flake8", "mypy"]
jupyter = ["jupyter", "notebook", "ipykernel"]

[tool.maturin]
features = ["pyo3/extension-module"]
module-name = "pulse_trader_engine._pulse_trader_engine"
python-source = "."

# Black ä»£ç æ ¼å¼åŒ–é…ç½®
[tool.black]
line-length = 88
target-version = ['py311']
include = '\.pyi?$'

# Pytest é…ç½®
[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
addopts = "-v --tb=short --strict-markers"
markers = [
    "slow: marks tests as slow",
    "integration: marks tests as integration tests",
    "unit: marks tests as unit tests",
]

# MyPy ç±»å‹æ£€æŸ¥é…ç½®
[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true

[tool.isort]
profile = "black"
line_length = 88
EOF

# éªŒè¯ Python åŒ…å¯¼å…¥
python -c "import pulse_trader; print('âœ… Python åŒ…ç»“æ„åˆ›å»ºæˆåŠŸ')"
```

---

## æ­¥éª¤ 5: å¼€å‘å·¥å…·é…ç½®

### 5.1 åˆ›å»º .gitignore

```bash
cat > .gitignore << 'EOF'
# Rust
target/
Cargo.lock
**/*.rs.bk
.cargo/

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# è™šæ‹Ÿç¯å¢ƒ (ä¿ç•™.venvï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨å®ƒ)
# .venv/  # å·²æ³¨é‡Šï¼Œå› ä¸ºè¿™æ˜¯æˆ‘ä»¬å½“å‰ä½¿ç”¨çš„è™šæ‹Ÿç¯å¢ƒ
venv/
env/
ENV/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db

# æ•°æ®æ–‡ä»¶
data/raw/*
data/processed/*
data/cache/*
data/storage/*.db
data/logs/*.log

# é…ç½®æ–‡ä»¶ (åŒ…å«æ•æ„Ÿä¿¡æ¯)
config/.env
.env.local
.env.production

# æµ‹è¯•å’Œè¦†ç›–ç‡
.coverage
htmlcov/
.pytest_cache/
.tox/

# Jupyter
.ipynb_checkpoints/

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.temp
temp/
EOF
```

### 5.2 åˆ›å»ºé¡¹ç›®é…ç½®æ–‡ä»¶

```bash
# åˆ›å»ºä¸“ä¸šç¯å¢ƒå˜é‡æ¨¡æ¿
cat > config/.env.example << 'EOF'
# æ•°æ®æºAPIå¯†é’¥
TUSHARE_TOKEN=your_tushare_token_here
AKSHARE_CACHE_ENABLED=true
PYTDX_SERVER=119.147.212.81
PYTDX_PORT=7709
WIND_TOKEN=your_wind_token_here
CHOICETOKEN=your_choice_token_here

# ç”Ÿäº§çº§æ•°æ®åº“é…ç½®
CLICKHOUSE_URL=clickhouse://localhost:9000/pulse_trader
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=pulse_trader_prod

REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0

POSTGRES_URL=postgresql://user:password@localhost:5432/pulse_trader_meta
POSTGRES_USER=pulse_trader
POSTGRES_PASSWORD=secure_password_here
POSTGRES_DB=pulse_trader_meta

# ç›‘æ§å’Œå¯è§‚æµ‹æ€§
SENTRY_DSN=https://your_sentry_dsn_here
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# é«˜é¢‘äº¤æ˜“é…ç½®
ULTRA_LOW_LATENCY=true
CPU_AFFINITY=true
HUGE_PAGES=true
KERNEL_BYPASS=true

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE=data/logs/pulse_trader.log
LOG_FORMAT=json
LOG_MAX_SIZE=1GB
LOG_BACKUP_COUNT=30

# äº¤æ˜“é…ç½®
DEFAULT_CAPITAL=10000000
COMMISSION_RATE=0.0003
SLIPPAGE_RATE=0.0001
MAX_POSITION_SIZE=0.1
MAX_DAILY_LOSS=0.02

# é£é™©ç®¡ç†
MAX_DRAWDOWN=0.08
RISK_FREE_RATE=0.025
VAR_CONFIDENCE=0.95
BETA_LIMIT=1.5
LEVERAGE_LIMIT=3.0

# æœºå™¨å­¦ä¹ é…ç½®
ML_MODEL_PATH=data/models/
FEATURE_STORE_PATH=data/features/
BACKTEST_RESULTS_PATH=data/backtest/
HYPEROPT_TRIALS=100
CROSS_VALIDATION_FOLDS=5

# æ€§èƒ½é…ç½®
RAY_NUM_CPUS=16
RAY_MEMORY=100000000000
DASK_SCHEDULER_ADDRESS=127.0.0.1:8786
NUMBA_NUM_THREADS=8
OMP_NUM_THREADS=8
EOF

# åˆ›å»ºä¸“ä¸šé…ç½®æ–‡ä»¶ (å¼€å‘ç¯å¢ƒ)
cat > config/dev/config.yaml << 'EOF'
# PulseTrader ä¸“ä¸šé‡åŒ–é…ç½® - å¼€å‘ç¯å¢ƒ

app:
  name: "PulseTrader"
  version: "0.1.0"
  environment: "development"
  debug: true
  log_level: "DEBUG"

data_sources:
  primary: "akshare"
  fallback: "tushare"
  real_time: "pytdx"
  batch_size: 1000

  tushare:
    token: "${TUSHARE_TOKEN}"
    pro_api: "https://api.tushare.pro"
    rate_limit: 200  # æ¯åˆ†é’Ÿè¯·æ±‚æ¬¡æ•°
    timeout: 30
    retry_count: 3

  akshare:
    cache_enabled: true
    cache_dir: "data/cache/akshare"
    timeout: 30
    rate_limit: 100

  pytdx:
    servers:
      - host: "119.147.212.81"
        port: 7709
        name: "ä¸Šæµ·æœŸè´§"
      - host: "202.108.253.130"
        port: 7709
        name: "æ·±åœ³æœŸè´§"
      - host: "180.153.18.170"
        port: 7709
        name: "ä¸Šæµ·æœŸè´§å¤‡ç”¨"
      - host: "180.153.18.171"
        port: 7709
        name: "æ·±åœ³æœŸè´§å¤‡ç”¨"
    timeout: 5
    retry_count: 3
    connection_pool_size: 10

databases:
  clickhouse:
    url: "${CLICKHOUSE_URL}"
    user: "${CLICKHOUSE_USER}"
    password: "${CLICKHOUSE_PASSWORD}"
    database: "${CLICKHOUSE_DATABASE}"
    pool_size: 20
    compression: "lz4"
    max_execution_time: 300

  redis:
    url: "${REDIS_URL}"
    password: "${REDIS_PASSWORD}"
    db: "${REDIS_DB}"
    pool_size: 50
    socket_timeout: 5
    socket_connect_timeout: 5

  postgresql:
    url: "${POSTGRES_URL}"
    user: "${POSTGRES_USER}"
    password: "${POSTGRES_PASSWORD}"
    database: "${POSTGRES_DB}"
    pool_size: 10
    max_overflow: 20

performance:
  ultra_low_latency: false
  cpu_affinity: false
  huge_pages: false
  kernel_bypass: false
  numba_cache: true
  parallel_backtest: true
  max_workers: 8

risk_management:
  max_drawdown: 0.15
  var_confidence: 0.95
  beta_limit: 2.0
  leverage_limit: 5.0
  position_limit: 0.2
  sector_concentration: 0.4
  max_daily_loss: 0.05

machine_learning:
  feature_store:
    path: "data/features/"
    format: "parquet"
    compression: "snappy"

  models:
    path: "data/models/"
    auto_save: true
    versioning: true

  hyperopt:
    trials: 50
    timeout: 3600
    algorithm: "tpe"

  cross_validation:
    folds: 5
    shuffle: true
    stratified: true

monitoring:
  prometheus:
    enabled: true
    port: 9090
    metrics_path: "/metrics"

  grafana:
    enabled: true
    port: 3000
    dashboards_path: "monitoring/grafana/dashboards/"

  sentry:
    enabled: false
    dsn: "${SENTRY_DSN}"
    sample_rate: 0.1

  jaeger:
    enabled: false
    endpoint: "${JAEGER_ENDPOINT}"
    service_name: "pulse-trader"

logging:
  level: "${LOG_LEVEL}"
  format: "${LOG_FORMAT}"
  file: "data/logs/pulse_trader.log"
  max_size: "${LOG_MAX_SIZE}"
  backup_count: "${LOG_BACKUP_COUNT}"
  console: true
  structured: true

  loggers:
    pulse_trader:
      level: "DEBUG"
    clickhouse_driver:
      level: "INFO"
    redis:
      level: "WARNING"
    urllib3:
      level: "WARNING"
EOF

# åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®
cat > config/prod/config.yaml << 'EOF'
# PulseTrader ä¸“ä¸šé‡åŒ–é…ç½® - ç”Ÿäº§ç¯å¢ƒ

app:
  name: "PulseTrader"
  version: "0.1.0"
  environment: "production"
  debug: false
  log_level: "INFO"

# ç»§æ‰¿å¼€å‘ç¯å¢ƒé…ç½®ï¼Œè¦†ç›–å…³é”®å‚æ•°
performance:
  ultra_low_latency: true
  cpu_affinity: true
  huge_pages: true
  kernel_bypass: true
  numba_cache: false
  parallel_backtest: true
  max_workers: 32

risk_management:
  max_drawdown: 0.08
  max_daily_loss: 0.02
  position_limit: 0.1
  leverage_limit: 3.0

monitoring:
  sentry:
    enabled: true
    sample_rate: 1.0
  jaeger:
    enabled: true

logging:
  level: "INFO"
  console: false
  structured: true
EOF
```

### 5.3 åˆ›å»ºä¸“ä¸šå¼€å‘è„šæœ¬

```bash
# åˆ›å»ºè„šæœ¬ç›®å½• (å¦‚æœè¿˜æ²¡æœ‰)
mkdir -p scripts/{setup,deployment,monitoring,data_ingestion}

# åˆ›å»ºä¸“ä¸šç¯å¢ƒéªŒè¯è„šæœ¬
cat > scripts/setup/verify_env.py << 'EOF'
#!/usr/bin/env python3
"""
ä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒéªŒè¯è„šæœ¬
"""
import sys
import subprocess
import importlib
import os
import psutil
from pathlib import Path

def check_system_resources():
    """æ£€æŸ¥ç³»ç»Ÿèµ„æº"""
    memory_gb = psutil.virtual_memory().total / (1024**3)
    cpu_count = psutil.cpu_count()

    print(f"ğŸ–¥ï¸  ç³»ç»Ÿèµ„æº:")
    print(f"   CPU æ ¸å¿ƒæ•°: {cpu_count} {'âœ…' if cpu_count >= 8 else 'âš ï¸'}")
    print(f"   å†…å­˜: {memory_gb:.1f}GB {'âœ…' if memory_gb >= 32 else 'âš ï¸'}")

    return cpu_count >= 8 and memory_gb >= 32

def check_rust():
    """æ£€æŸ¥ Rust ç¯å¢ƒ"""
    try:
        result = subprocess.run(['cargo', '--version'], capture_output=True, text=True)
        if result.returncode == 0:
            print(f"âœ… Rust: {result.stdout.strip()}")
            return True
        else:
            print("âŒ Rust æœªæ­£ç¡®å®‰è£…")
            return False
    except FileNotFoundError:
        print("âŒ Rust æœªå®‰è£…")
        return False

def check_python():
    """æ£€æŸ¥ Python ç¯å¢ƒ"""
    version = sys.version_info
    if version >= (3, 11):
        print(f"âœ… Python: {version.major}.{version.minor}.{version.micro}")
        return True
    else:
        print(f"âš ï¸  Python ç‰ˆæœ¬æ¨èå‡çº§: {version.major}.{version.minor} (æ¨è 3.11+)")
        return False

def check_databases():
    """æ£€æŸ¥ä¸“ä¸šæ•°æ®åº“"""
    databases = {
        'ClickHouse': ['clickhouse-client', '--version'],
        'Redis': ['redis-server', '--version'],
        'PostgreSQL': ['psql', '--version'],
        'Docker': ['docker', '--version']
    }

    all_ok = True
    for name, cmd in databases.items():
        try:
            result = subprocess.run(cmd, capture_output=True, text=True)
            if result.returncode == 0:
                print(f"âœ… {name}: {result.stdout.strip()}")
            else:
                print(f"âš ï¸  {name}: æœªè¿è¡Œæˆ–æœªå®‰è£…")
                all_ok = False
        except (FileNotFoundError, subprocess.TimeoutExpired):
            print(f"âš ï¸  {name}: æœªå®‰è£…")
            all_ok = False

    return all_ok

def check_venv():
    """æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ"""
    venv_path = Path('.venv')
    if not venv_path.exists():
        print("âŒ è™šæ‹Ÿç¯å¢ƒ: .venv ç›®å½•ä¸å­˜åœ¨")
        return False

    if hasattr(sys, 'real_prefix') or (hasattr(sys, 'base_prefix') and sys.base_prefix != sys.prefix):
        print("âœ… è™šæ‹Ÿç¯å¢ƒ: å·²æ¿€æ´»")
        return True
    else:
        print("âš ï¸  è™šæ‹Ÿç¯å¢ƒ: æœªæ¿€æ´»ï¼Œè¯·è¿è¡Œ 'source .venv/bin/activate'")
        return False

def check_poetry():
    """æ£€æŸ¥ Poetry ç¯å¢ƒ"""
    try:
        result = subprocess.run(['poetry', '--version'], capture_output=True, text=True)
        if result.returncode == 0:
            print(f"âœ… Poetry: {result.stdout.strip()}")
            return True
        else:
            print("âŒ Poetry æœªæ­£ç¡®å®‰è£…")
            return False
    except FileNotFoundError:
        print("âŒ Poetry æœªå®‰è£…")
        return False

def check_quantum_packages():
    """æ£€æŸ¥é‡åŒ–ä¸“ä¸šåŒ…"""
    packages = {
        'æ ¸å¿ƒåŒ…': ['pandas', 'numpy', 'scipy', 'scikit-learn'],
        'é«˜æ€§èƒ½è®¡ç®—': ['polars', 'ray', 'dask', 'numba'],
        'é‡åŒ–ä¸“ç”¨': ['vectorbt', 'zipline', 'backtrader', 'empyrical'],
        'æ•°æ®åº“': ['clickhouse_driver', 'redis', 'sqlalchemy'],
        'æœºå™¨å­¦ä¹ ': ['torch', 'xgboost', 'optuna'],
        'å¼€å‘å·¥å…·': ['pytest', 'black', 'mypy', 'bandit']
    }

    all_ok = True
    for category, package_list in packages.items():
        print(f"\nğŸ“¦ {category}:")
        for package in package_list:
            try:
                importlib.import_module(package)
                print(f"   âœ… {package}")
            except ImportError:
                print(f"   âŒ {package} æœªå®‰è£…")
                all_ok = False

    return all_ok

def check_project_structure():
    """æ£€æŸ¥é¡¹ç›®ç›®å½•ç»“æ„"""
    required_dirs = [
        'engine/src', 'pulse_trader', 'data/raw', 'data/bronze', 'data/silver', 'data/gold',
        'config/dev', 'config/prod', 'research', 'monitoring', 'deployment', 'quality'
    ]

    print(f"\nğŸ“ é¡¹ç›®ç»“æ„:")
    for directory in required_dirs:
        if os.path.exists(directory):
            print(f"   âœ… {directory}/")
        else:
            print(f"   âŒ {directory}/ ä¸å­˜åœ¨")
            return False
    return True

def main():
    """ä¸»éªŒè¯å‡½æ•°"""
    print("ğŸ” ä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒéªŒè¯...")
    print("=" * 60)

    checks = [
        ("ç³»ç»Ÿèµ„æº", check_system_resources),
        ("Rust ç¯å¢ƒ", check_rust),
        ("Python ç¯å¢ƒ", check_python),
        ("ä¸“ä¸šæ•°æ®åº“", check_databases),
        ("è™šæ‹Ÿç¯å¢ƒ", check_venv),
        ("Poetry ç¯å¢ƒ", check_poetry),
        ("é‡åŒ–åŒ…", check_quantum_packages),
        ("é¡¹ç›®ç»“æ„", check_project_structure),
    ]

    all_passed = True
    for name, check_func in checks:
        print(f"\nğŸ“‹ æ£€æŸ¥ {name}:")
        if not check_func():
            all_passed = False

    print("\n" + "=" * 60)
    if all_passed:
        print("ğŸ‰ ä¸“ä¸šç¯å¢ƒéªŒè¯é€šè¿‡ï¼å¯ä»¥å¼€å§‹é‡åŒ–å¼€å‘äº† ğŸš€")
        print("ğŸ’¡ ä¸‹ä¸€æ­¥: è¿è¡Œ 'python scripts/setup/start_dev.sh' å¯åŠ¨å¼€å‘ç¯å¢ƒ")
    else:
        print("âš ï¸  ç¯å¢ƒéªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°é—®é¢˜")
        print("\nğŸ’¡ è§£å†³å»ºè®®:")
        print("1. å®‰è£…ä¸“ä¸šæ•°æ®åº“: sudo apt install clickhouse-server redis-server postgresql")
        print("2. å®‰è£… Docker: curl -fsSL https://get.docker.com | sh")
        print("3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ: source .venv/bin/activate")
        print("4. å®‰è£… Poetry: curl -sSL https://install.python-poetry.org | python3 -")
        print("5. å®‰è£…ä¾èµ–: poetry install --all-extras")

if __name__ == "__main__":
    main()
EOF

# åˆ›å»ºå¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
cat > scripts/setup/start_dev.sh << 'EOF'
#!/bin/bash
# ä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬

set -e

echo "ğŸš€ å¯åŠ¨ä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒ..."

# æ£€æŸ¥å¹¶å¯åŠ¨æ•°æ®åº“æœåŠ¡
echo "ğŸ“Š å¯åŠ¨æ•°æ®åº“æœåŠ¡..."
sudo systemctl start clickhouse-server || echo "ClickHouse æ‰‹åŠ¨å¯åŠ¨"
sudo systemctl start redis-server || echo "Redis æ‰‹åŠ¨å¯åŠ¨"
sudo systemctl start postgresql || echo "PostgreSQL æ‰‹åŠ¨å¯åŠ¨"

# å¯åŠ¨ Docker æœåŠ¡
echo "ğŸ³ å¯åŠ¨ Docker æœåŠ¡..."
sudo systemctl start docker || echo "Docker æ‰‹åŠ¨å¯åŠ¨"

# è®¾ç½®æ€§èƒ½å‚æ•°
echo "âš¡ è®¾ç½®é«˜æ€§èƒ½å‚æ•°..."
echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf
echo 'net.core.rmem_max = 134217728' | sudo tee -a /etc/sysctl.conf
echo 'net.core.wmem_max = 134217728' | sudo tee -a /etc/sysctl.conf
sudo sysctl -p

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
echo "ğŸ æ¿€æ´» Python è™šæ‹Ÿç¯å¢ƒ..."
source .venv/bin/activate

# å¯åŠ¨ç›‘æ§æœåŠ¡
echo "ğŸ“ˆ å¯åŠ¨ç›‘æ§æœåŠ¡..."
cd monitoring/prometheus && prometheus --config.file=prometheus.yml &
cd ../grafana && grafana-server --config=grafana.ini &
cd ../../

# å¯åŠ¨ Ray é›†ç¾¤ (ç”¨äºåˆ†å¸ƒå¼è®¡ç®—)
echo "ğŸŒ å¯åŠ¨ Ray é›†ç¾¤..."
ray start --head --port=6379 --redis-port=6380

# å¯åŠ¨ Dask è°ƒåº¦å™¨ (å¯é€‰)
echo "ğŸ”„ å¯åŠ¨ Dask è°ƒåº¦å™¨..."
dask-scheduler --port 8786 &
dask-worker tcp://127.0.0.1:8786 --nprocs 4 &

echo "âœ… å¼€å‘ç¯å¢ƒå¯åŠ¨å®Œæˆï¼"
echo "ğŸ“Š Prometheus: http://localhost:9090"
echo "ğŸ“ˆ Grafana: http://localhost:3000 (admin/admin)"
echo "ğŸŒ Ray Dashboard: http://localhost:8265"
echo "ğŸ”„ Dask Dashboard: http://localhost:8787"

# ä¿æŒè„šæœ¬è¿è¡Œ
echo "æŒ‰ Ctrl+C åœæ­¢æ‰€æœ‰æœåŠ¡..."
trap 'echo "ğŸ›‘ åœæ­¢æœåŠ¡..."; pkill -f prometheus; pkill -f grafana; ray stop; pkill -f dask; exit' INT
wait
EOF

# åˆ›å»º Docker å¼€å‘ç¯å¢ƒ
cat > scripts/setup/docker_dev.sh << 'EOF'
#!/bin/bash
# Docker ä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒ

echo "ğŸ³ å¯åŠ¨ Docker é‡åŒ–å¼€å‘ç¯å¢ƒ..."

# æ„å»ºå¼€å‘ç¯å¢ƒé•œåƒ
docker build -t pulse-trader-dev -f deployment/docker/Dockerfile.dev .

# å¯åŠ¨å¼€å‘å®¹å™¨
docker run -it --rm \
  --name pulse-trader-dev \
  --gpus all \
  -v $(pwd):/workspace \
  -p 8888:8888 \
  -p 9090:9090 \
  -p 3000:3000 \
  -p 8265:8265 \
  -p 8786:8786 \
  --memory=32g \
  --cpus=16 \
  pulse-trader-dev

echo "âœ… Docker å¼€å‘ç¯å¢ƒå·²å¯åŠ¨"
echo "ğŸ““ Jupyter: http://localhost:8888"
echo "ğŸ“Š Prometheus: http://localhost:9090"
echo "ğŸ“ˆ Grafana: http://localhost:3000"
EOF

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/setup/verify_env.py
chmod +x scripts/setup/start_dev.sh
chmod +x scripts/setup/docker_dev.sh
```

### 5.4 åˆ›å»º Docker é…ç½®

```bash
# åˆ›å»º Docker ç›®å½•
mkdir -p deployment/docker

# åˆ›å»ºå¼€å‘ç¯å¢ƒ Dockerfile
cat > deployment/docker/Dockerfile.dev << 'EOF'
FROM nvidia/cuda:12.1-devel-ubuntu22.04

# è®¾ç½®éäº¤äº’å¼å®‰è£…
ENV DEBIAN_FRONTEND=noninteractive
ENV TZ=Asia/Shanghai

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    python3.11 \
    python3.11-venv \
    python3.11-dev \
    python3-pip \
    git \
    curl \
    wget \
    build-essential \
    pkg-config \
    libssl-dev \
    libffi-dev \
    libhdf5-dev \
    libpq-dev \
    redis-tools \
    postgresql-client \
    clickhouse-client \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£… Rust
RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
ENV PATH="/root/.cargo/bin:${PATH}"
RUN rustup component add rustfmt clippy rust-analyzer

# å®‰è£… Poetry
RUN curl -sSL https://install.python-poetry.org | python3 -
ENV PATH="/root/.local/bin:${PATH}"

# åˆ›å»ºå·¥ä½œç›®å½•
WORKDIR /workspace

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
COPY pyproject.toml poetry.lock ./
COPY engine ./engine/

# å®‰è£… Python ä¾èµ–
RUN poetry config virtualenvs.create false
RUN poetry install --all-extras

# æ„å»º Rust å¼•æ“
RUN cd engine && cargo build --release

# å®‰è£…é‡åŒ–ä¸“ä¸šå·¥å…·
RUN pip install jupyterlab ipykernel \
    && python -m ipykernel install --user --name python3

# æš´éœ²ç«¯å£
EXPOSE 8888 9090 3000 8265 8786

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONPATH=/workspace
ENV RAY_ADDRESS=auto

# å¯åŠ¨å‘½ä»¤
CMD ["bash", "-c", "jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root --NotebookApp.token=''"]
EOF

# åˆ›å»º Docker Compose å¼€å‘ç¯å¢ƒ
cat > deployment/docker/docker-compose.dev.yml << 'EOF'
version: '3.8'

services:
  # ä¸»å¼€å‘ç¯å¢ƒ
  pulse-trader-dev:
    build:
      context: ../..
      dockerfile: deployment/docker/Dockerfile.dev
    container_name: pulse-trader-dev
    ports:
      - "8888:8888"  # Jupyter
      - "8265:8265"  # Ray Dashboard
      - "8786:8786"  # Dask Scheduler
      - "8787:8787"  # Dask Dashboard
    volumes:
      - ../..:/workspace
      - /mnt/data:/data  # æ•°æ®ç›®å½•æŒ‚è½½
    environment:
      - PYTHONPATH=/workspace
      - CUDA_VISIBLE_DEVICES=0
    networks:
      - pulse-trader-network
    profiles:
      - dev

  # ClickHouse æ—¶åºæ•°æ®åº“
  clickhouse:
    image: clickhouse/clickhouse-server:latest
    container_name: pulse-trader-clickhouse
    ports:
      - "9000:9000"  # Native interface
      - "8123:8123"  # HTTP interface
    volumes:
      - clickhouse_data:/var/lib/clickhouse
      - ./monitoring/clickhouse/config.xml:/etc/clickhouse-server/config.xml
    environment:
      - CLICKHOUSE_DB=pulse_trader
      - CLICKHOUSE_USER=default
      - CLICKHOUSE_PASSWORD=
    networks:
      - pulse-trader-network
    profiles:
      - databases

  # Redis ç¼“å­˜
  redis:
    image: redis:7-alpine
    container_name: pulse-trader-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
      - ./monitoring/redis/redis.conf:/usr/local/etc/redis/redis.conf
    command: redis-server /usr/local/etc/redis/redis.conf
    networks:
      - pulse-trader-network
    profiles:
      - databases

  # PostgreSQL å…ƒæ•°æ®å­˜å‚¨
  postgres:
    image: postgres:15-alpine
    container_name: pulse-trader-postgres
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_DB=pulse_trader_meta
      - POSTGRES_USER=pulse_trader
      - POSTGRES_PASSWORD=secure_password_here
    networks:
      - pulse-trader-network
    profiles:
      - databases

  # Prometheus ç›‘æ§
  prometheus:
    image: prom/prometheus:latest
    container_name: pulse-trader-prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./monitoring/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--web.enable-lifecycle'
    networks:
      - pulse-trader-network
    profiles:
      - monitoring

  # Grafana å¯è§†åŒ–
  grafana:
    image: grafana/grafana:latest
    container_name: pulse-trader-grafana
    ports:
      - "3000:3000"
    volumes:
      - grafana_data:/var/lib/grafana
      - ./monitoring/grafana/dashboards:/etc/grafana/provisioning/dashboards
      - ./monitoring/grafana/datasources:/etc/grafana/provisioning/datasources
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
      - GF_USERS_ALLOW_SIGN_UP=false
    networks:
      - pulse-trader-network
    profiles:
      - monitoring

  # Ray Head èŠ‚ç‚¹
  ray-head:
    image: rayproject/ray:latest
    container_name: pulse-trader-ray-head
    ports:
      - "6379:6379"  # Ray primary
      - "8265:8265"  # Ray Dashboard
    volumes:
      - ../..:/workspace
    command: >
      ray start --head
      --dashboard-host=0.0.0.0
      --dashboard-port=8265
      --redis-port=6379
    networks:
      - pulse-trader-network
    profiles:
      - compute

  # Dask Scheduler
  dask-scheduler:
    image: daskdev/dask:latest
    container_name: pulse-trader-dask-scheduler
    ports:
      - "8786:8786"  # Scheduler
      - "8787:8787"  # Dashboard
    volumes:
      - ../..:/workspace
    command: >
      dask-scheduler
      --host 0.0.0.0
      --port 8786
      --bokeh-port 8787
    networks:
      - pulse-trader-network
    profiles:
      - compute

volumes:
  clickhouse_data:
  redis_data:
  postgres_data:
  prometheus_data:
  grafana_data:

networks:
  pulse-trader-network:
    driver: bridge
EOF

# åˆ›å»ºç”Ÿäº§ç¯å¢ƒ Docker Compose
cat > deployment/docker/docker-compose.prod.yml << 'EOF'
version: '3.8'

services:
  pulse-trader-prod:
    build:
      context: ../..
      dockerfile: deployment/docker/Dockerfile.prod
    container_name: pulse-trader-prod
    privileged: true  # ç”¨äºé«˜æ€§èƒ½é…ç½®
    ports:
      - "8000:8000"  # API æœåŠ¡
    volumes:
      - ../..:/workspace
      - /mnt/data:/data
    environment:
      - ENVIRONMENT=production
      - ULTRA_LOW_LATENCY=true
      - CPU_AFFINITY=true
    networks:
      - pulse-trader-network
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 64G
          cpus: '16'
        reservations:
          memory: 32G
          cpus: '8'

  # å…¶ä»–æœåŠ¡ä¸å¼€å‘ç¯å¢ƒç›¸åŒï¼Œä½†é…ç½®æ›´é€‚åˆç”Ÿäº§ç¯å¢ƒ
  # ...

networks:
  pulse-trader-network:
    driver: bridge
EOF
```

### 5.5 é…ç½® Git ä»“åº“

```bash
# åˆå§‹åŒ– Git ä»“åº“
git init

# é…ç½®ç”¨æˆ·ä¿¡æ¯ (å¦‚æœè¿˜æ²¡æœ‰)
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# åˆ›å»º .gitignore
cat > .gitignore << 'EOF'
# Rust
target/
Cargo.lock
**/*.rs.bk
.cargo/

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# è™šæ‹Ÿç¯å¢ƒ
.venv/
venv/
env/
ENV/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db

# æ•°æ®æ–‡ä»¶ (ä¿ç•™ç›®å½•ç»“æ„)
data/raw/*
data/bronze/*
data/silver/*
data/gold/*
data/cache/*
data/storage/*.db
data/logs/*.log
!data/**/.gitkeep

# é…ç½®æ–‡ä»¶ (åŒ…å«æ•æ„Ÿä¿¡æ¯)
config/.env
.env.local
.env.production
config/secrets/*

# æ¨¡å‹å’Œç»“æœ
data/models/*
data/features/*
data/backtest/*
research/notebooks/.ipynb_checkpoints/*

# ç›‘æ§å’Œæ—¥å¿—
monitoring/prometheus/data/
monitoring/grafana/data/
logs/

# Docker
.dockerignore

# æµ‹è¯•å’Œè¦†ç›–ç‡
.coverage
htmlcov/
.pytest_cache/
.tox/
.pytest_cache/

# Jupyter
.ipynb_checkpoints/

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.temp
temp/
.DS_Store
Thumbs.db

# ä¸“ä¸šå·¥å…·
.ray_bootstrap_key
dask-worker-space/
EOF

# åˆ›å»ºåˆå§‹æäº¤
git add .
git commit -m "feat: åˆå§‹åŒ–ä¸“ä¸šé‡åŒ–å¼€å‘ç¯å¢ƒ

âœ¨ æ–°åŠŸèƒ½:
- é…ç½®ä¼ä¸šçº§ Rust+Python é‡åŒ–æŠ€æœ¯æ ˆ
- é›†æˆ ClickHouse/Redis/PostgreSQL ä¸“ä¸šæ•°æ®åº“
- æ·»åŠ é«˜æ€§èƒ½è®¡ç®—æ¡†æ¶ (Ray/Dask/Polars)
- å®ç°å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ (Docker/Docker Compose)
- å»ºç«‹æ•°æ®æ¹–æ¶æ„ (Bronze/Silver/Gold åˆ†å±‚)
- é…ç½®ä¸“ä¸šç›‘æ§å’Œå¯è§‚æµ‹æ€§ (Prometheus/Grafana)
- æ·»åŠ é‡åŒ–ä¸“ç”¨ä¾èµ–åŒ… (VectorBT/Zipline/QuantLib)
- åˆ›å»ºè´¨é‡ä¿è¯å·¥å…·é“¾ (æµ‹è¯•/å®‰å…¨/æ€§èƒ½åˆ†æ)

ğŸ”§ æŠ€æœ¯ç‰¹æ€§:
- æ”¯æŒ 32GB+ å†…å­˜å’Œ 16+ æ ¸å¿ƒ CPU é…ç½®
- è¶…ä½å»¶è¿Ÿäº¤æ˜“ç³»ç»Ÿé…ç½®
- åˆ†å¸ƒå¼è®¡ç®—é›†ç¾¤æ”¯æŒ
- æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒå’Œéƒ¨ç½²
- ä¸“ä¸šé£é™©ç®¡ç†æ¨¡å—
- ä¼ä¸šçº§å®‰å…¨å’Œç›‘æ§

ğŸ—ï¸ æ¶æ„æ”¹è¿›:
- å¾®æœåŠ¡åŒ–è®¾è®¡
- ç¯å¢ƒåˆ†ç¦» (dev/staging/prod)
- å®Œæ•´çš„ CI/CD æ”¯æŒ
- è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•
- å®¹å™¨åŒ–éƒ¨ç½²"
```

---

## æ­¥éª¤ 6: ç¯å¢ƒéªŒè¯æµ‹è¯•

### 6.1 è¿è¡Œä¸“ä¸šç¯å¢ƒéªŒè¯

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
pwd  # åº”è¯¥æ˜¾ç¤º /home/jackluo/PulseTrader

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# è¿è¡Œä¸“ä¸šéªŒè¯è„šæœ¬
python scripts/setup/verify_env.py
```

é¢„æœŸçœ‹åˆ°æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½æ˜¾ç¤º âœ…ï¼Œæœ€åæ˜¾ç¤º "ğŸ‰ ä¸“ä¸šç¯å¢ƒéªŒè¯é€šè¿‡ï¼"

### 6.2 Rust é«˜æ€§èƒ½å¼•æ“æµ‹è¯•

```bash
# è¿›å…¥ Rust é¡¹ç›®ç›®å½•
cd engine

# æ£€æŸ¥ç¼–è¯‘
cargo check

# æ€§èƒ½ä¼˜åŒ–æ„å»º
cargo build --release

# è¿è¡Œæµ‹è¯•
cargo test

# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
cargo bench

# è¿”å›æ ¹ç›®å½•
cd ..
```

### 6.3 é‡åŒ–ä¸“ä¸šåŒ…æµ‹è¯•

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# æµ‹è¯•æ ¸å¿ƒé‡åŒ–åŒ…
python -c "
packages = [
    'pandas', 'numpy', 'scipy', 'scikit-learn',
    'polars', 'ray', 'dask', 'numba',
    'vectorbt', 'empyrical', 'backtrader',
    'clickhouse_driver', 'redis', 'sqlalchemy',
    'torch', 'xgboost', 'optuna'
]

for pkg in packages:
    try:
        __import__(pkg)
        print(f'âœ… {pkg}')
    except ImportError as e:
        print(f'âŒ {pkg}: {e}')

print('\\nğŸ¯ é‡åŒ–ç¯å¢ƒæµ‹è¯•å®Œæˆ')
"

# æµ‹è¯•é«˜æ€§èƒ½è®¡ç®—
python -c "
import ray
import dask
import polars as pl
import numpy as np

# æµ‹è¯• Ray
ray.init(ignore_reinit_error=True)
print('âœ… Ray åˆ†å¸ƒå¼è®¡ç®—å°±ç»ª')

# æµ‹è¯• Dask
from dask.distributed import Client
client = Client()
print('âœ… Dask åˆ†å¸ƒå¼è®¡ç®—å°±ç»ª')

# æµ‹è¯• Polars é«˜æ€§èƒ½æ•°æ®å¤„ç†
df = pl.DataFrame({'x': range(1000000), 'y': np.random.randn(1000000)})
result = df.select([
    pl.col('x').sum(),
    pl.col('y').mean()
])
print('âœ… Polars é«˜æ€§èƒ½æ•°æ®å¤„ç†å°±ç»ª')

print('\\nğŸš€ é«˜æ€§èƒ½è®¡ç®—ç¯å¢ƒéªŒè¯é€šè¿‡')
"
```

### 6.4 Docker ç¯å¢ƒæµ‹è¯•

```bash
# æµ‹è¯• Docker å¼€å‘ç¯å¢ƒ
docker --version
docker-compose --version

# å¯åŠ¨æ•°æ®åº“æœåŠ¡
cd deployment/docker
docker-compose -f docker-compose.dev.yml --profile databases up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 10

# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker-compose exec clickhouse clickhouse-client --query "SELECT 1 as test"
docker-compose exec redis redis-cli ping
docker-compose exec postgres psql -U pulse_trader -d pulse_trader_meta -c "SELECT 1;"

# å¯åŠ¨ç›‘æ§æœåŠ¡
docker-compose -f docker-compose.dev.yml --profile monitoring up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

cd ../../
```

### 6.5 æ··åˆå¼€å‘ç¯å¢ƒæµ‹è¯•

```bash
# ä½¿ç”¨ Poetry è¿è¡Œ Maturin æ„å»º
cd engine
poetry run maturin develop
cd ..

# éªŒè¯ Rust æ‰©å±•ï¼ˆå¯èƒ½å¤±è´¥ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºè¿˜æ²¡æœ‰å†™ Rust ä»£ç ï¼‰
poetry run python -c "try:
    import pulse_trader_engine
    print('âœ… Rust æ‰©å±•å¯ç”¨')
except ImportError:
    print('âš ï¸  Rust æ‰©å±•å°šæœªå®ç°ï¼Œè¿™æ˜¯æ­£å¸¸çš„')
"

# æ£€æŸ¥ Poetry ä¾èµ–çŠ¶æ€
poetry show --tree

# å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
./scripts/setup/start_dev.sh
```

---

## âœ… ä¸“ä¸šé‡åŒ–ç¯å¢ƒå®Œæˆæ£€æŸ¥æ¸…å•

åœ¨ç»§ç»­ä¸‹ä¸€é˜¶æ®µä¹‹å‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰ä¸“ä¸šè¦æ±‚éƒ½å·²å®Œæˆï¼š

### ğŸ–¥ï¸ ç³»ç»Ÿèµ„æºä¸ç¯å¢ƒ
- [ ] **ç¡¬ä»¶é…ç½®**: 32GB+ å†…å­˜ï¼Œ8æ ¸+ CPUï¼Œ100GB+ SSD
- [ ] **ç³»ç»Ÿç¯å¢ƒ**: WSL2 + Ubuntu 22.04 æˆ–åŸç”Ÿ Linux
- [ ] **Rust å¼•æ“**: 1.75+ å·²å®‰è£…ï¼Œé…ç½®ä¼˜åŒ–å®Œæˆ
- [ ] **Python ç¯å¢ƒ**: 3.11+ å·²å®‰è£…ï¼Œè™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- [ ] **Poetry**: å·²å®‰è£…å¹¶é…ç½®ä¸“ä¸šé•œåƒæº

### ğŸ“Š ä¸“ä¸šæ•°æ®åº“æœåŠ¡
- [ ] **ClickHouse**: æ—¶åºæ•°æ®åº“å·²å®‰è£…å¹¶å¯è¿æ¥
- [ ] **Redis**: å†…å­˜æ•°æ®åº“å·²å®‰è£…å¹¶è¿è¡Œ
- [ ] **PostgreSQL**: å…ƒæ•°æ®å­˜å‚¨å·²å®‰è£…å¹¶é…ç½®
- [ ] **Docker**: å®¹å™¨åŒ–ç¯å¢ƒå·²å°±ç»ª
- [ ] **æ•°æ®åº“è¿æ¥æµ‹è¯•**: æ‰€æœ‰æ•°æ®åº“è¿æ¥æµ‹è¯•é€šè¿‡

### ğŸš€ é«˜æ€§èƒ½è®¡ç®—æ¡†æ¶
- [ ] **Ray**: åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶å·²é…ç½®
- [ ] **Dask**: å¹¶è¡Œè®¡ç®—æ¡†æ¶å·²é…ç½®
- [ ] **Polars**: é«˜æ€§èƒ½æ•°æ®å¤„ç†åº“å·²å®‰è£…
- [ ] **Numba**: JIT ç¼–è¯‘å™¨å·²é…ç½®
- [ ] **æ€§èƒ½æµ‹è¯•**: é«˜æ€§èƒ½è®¡ç®—æµ‹è¯•é€šè¿‡

### ğŸ“ˆ é‡åŒ–ä¸“ä¸šåŒ…
- [ ] **æ ¸å¿ƒåŒ…**: pandas, numpy, scipy, scikit-learn
- [ ] **é‡åŒ–ä¸“ç”¨**: vectorbt, zipline, backtrader, empyrical
- [ ] **æœºå™¨å­¦ä¹ **: torch, xgboost, lightgbm, optuna
- [ ] **æ•°æ®è¿æ¥å™¨**: clickhouse_driver, redis, sqlalchemy
- [ ] **æ‰€æœ‰ä¸“ä¸šåŒ…å¯¼å…¥æµ‹è¯•é€šè¿‡**

### ğŸ—ï¸ é¡¹ç›®ç»“æ„
- [ ] **æ•°æ®æ¹–æ¶æ„**: Bronze/Silver/Gold åˆ†å±‚å­˜å‚¨å·²åˆ›å»º
- [ ] **Rust å¼•æ“**: é«˜æ€§èƒ½å¼•æ“ç›®å½•ç»“æ„å®Œæ•´
- [ ] **Python ç­–ç•¥å±‚**: ç­–ç•¥å’Œåˆ†ææ¨¡å—å·²ç»„ç»‡
- [ ] **ç ”ç©¶ç¯å¢ƒ**: notebooks å’Œå®éªŒç›®å½•å·²è®¾ç½®
- [ ] **ç›‘æ§ä½“ç³»**: prometheus/grafana ç›®å½•å·²åˆ›å»º

### âš™ï¸ é…ç½®ä¸éƒ¨ç½²
- [ ] **ç¯å¢ƒé…ç½®**: dev/prod ç¯å¢ƒåˆ†ç¦»å·²å®Œæˆ
- [ ] **Docker é…ç½®**: å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒå®¹å™¨å·²é…ç½®
- [ ] **æ€§èƒ½å‚æ•°**: ç³»ç»Ÿæ€§èƒ½å‚æ•°å·²ä¼˜åŒ–
- [ ] **å®‰å…¨é…ç½®**: .gitignore å’Œå®‰å…¨é…ç½®å·²è®¾ç½®
- [ ] **é…ç½®æ–‡ä»¶**: æ‰€æœ‰é…ç½®æ–‡ä»¶å·²åˆ›å»ºå¹¶éªŒè¯

### ğŸ” è´¨é‡ä¿è¯
- [ ] **ä»£ç è´¨é‡**: black, isort, mypy, bandit å·²é…ç½®
- [ ] **æµ‹è¯•æ¡†æ¶**: pytest, pytest-cov, pytest-benchmark å·²å®‰è£…
- [ ] **æ€§èƒ½åˆ†æ**: py-spy, memory-profiler å·²é…ç½®
- [ ] **å®‰å…¨å®¡è®¡**: cargo-audit, cargo-deny å·²å®‰è£…
- [ ] **ä¸“ä¸šéªŒè¯è„šæœ¬è¿è¡Œé€šè¿‡**

### ğŸ“‹ éªŒè¯æµ‹è¯•
- [ ] **ç¯å¢ƒéªŒè¯**: `python scripts/setup/verify_env.py` å…¨éƒ¨é€šè¿‡
- [ ] **Rust å¼•æ“æµ‹è¯•**: cargo check, test, bench å…¨éƒ¨é€šè¿‡
- [ ] **é‡åŒ–åŒ…æµ‹è¯•**: æ‰€æœ‰é‡åŒ–ä¸“ä¸šåŒ…å¯¼å…¥æˆåŠŸ
- [ ] **é«˜æ€§èƒ½è®¡ç®—æµ‹è¯•**: Ray, Dask, Polars æµ‹è¯•é€šè¿‡
- [ ] **Docker ç¯å¢ƒæµ‹è¯•**: æ‰€æœ‰å®¹å™¨æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] **æ··åˆå¼€å‘æµ‹è¯•**: Maturin æ„å»ºæµ‹è¯•é€šè¿‡

### ğŸ¯ ç›‘æ§ä¸å¯è§‚æµ‹æ€§
- [ ] **Prometheus**: ç›‘æ§ç³»ç»Ÿå·²é…ç½®
- [ ] **Grafana**: å¯è§†åŒ–é¢æ¿å·²è®¾ç½®
- [ ] **æ—¥å¿—ç³»ç»Ÿ**: ç»“æ„åŒ–æ—¥å¿—å·²é…ç½®
- [ ] **æ€§èƒ½ç›‘æ§**: åº”ç”¨æ€§èƒ½ç›‘æ§å°±ç»ª
- [ ] **é”™è¯¯è¿½è¸ª**: Sentry é…ç½®å·²å‡†å¤‡

### ğŸ’¾ Git ä»“åº“
- [ ] **é¡¹ç›®åˆå§‹åŒ–**: Git ä»“åº“å·²æ­£ç¡®åˆå§‹åŒ–
- [ ] **ä¸“ä¸š .gitignore**: é‡åŒ–é¡¹ç›®ä¸“ç”¨å¿½ç•¥è§„åˆ™å·²è®¾ç½®
- [ ] **åˆå§‹æäº¤**: ç¬¦åˆä¸“ä¸šè§„èŒƒçš„æäº¤ä¿¡æ¯
- [ ] **åˆ†æ”¯ç­–ç•¥**: å¼€å‘åˆ†æ”¯å·²å‡†å¤‡å°±ç»ª

---

## ğŸš¨ ä¸“ä¸šç¯å¢ƒå¸¸è§é—®é¢˜è§£å†³

### ğŸ¦€ Rust ç¯å¢ƒé—®é¢˜
```bash
# é‡æ–°åŠ è½½ Rust ç¯å¢ƒå˜é‡
source ~/.cargo/env

# æ›´æ–° Rust å·¥å…·é“¾åˆ°æœ€æ–°ç‰ˆæœ¬
rustup update

# æ£€æŸ¥ Rust ç¯å¢ƒçŠ¶æ€
rustc --version && cargo --version && rustup show
```

### ğŸ Python å’Œ Poetry é—®é¢˜
```bash
# é‡æ–°å®‰è£… Poetry (å¦‚æœéœ€è¦)
curl -sSL https://install.python-poetry.org | python3 -

# é…ç½®å›½å†…ä¸“ä¸šé•œåƒæº
poetry source add --priority=primary tsinghua https://pypi.tuna.tsinghua.edu.cn/simple/

# æ¸…ç†ç¼“å­˜å¹¶é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–
poetry cache clear pypi --all && poetry install --all-extras

# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒçŠ¶æ€
poetry env info && poetry config --list
```

### ğŸ“Š æ•°æ®åº“è¿æ¥é—®é¢˜
```bash
# å¯åŠ¨æ‰€æœ‰æ•°æ®åº“æœåŠ¡
sudo systemctl start clickhouse-server redis-server postgresql

# Docker ç¯å¢ƒä¸‹å¯åŠ¨æ•°æ®åº“
cd deployment/docker
docker-compose -f docker-compose.dev.yml --profile databases up -d

# æµ‹è¯•æ•°æ®åº“è¿æ¥
clickhouse-client --query "SELECT version()"
redis-cli ping
psql -U pulse_trader -d pulse_trader_meta -c "SELECT version();"
```

### ğŸ³ Docker å®¹å™¨é—®é¢˜
```bash
# æ£€æŸ¥ Docker æœåŠ¡çŠ¶æ€
sudo systemctl status docker

# é‡æ–°å¯åŠ¨ Docker æœåŠ¡
sudo systemctl restart docker

# æ¸…ç† Docker ç¼“å­˜
docker system prune -f

# é‡æ–°æ„å»ºå¼€å‘ç¯å¢ƒ
docker build -t pulse-trader-dev -f deployment/docker/Dockerfile.dev .
```

### âš¡ é«˜æ€§èƒ½è®¡ç®—æ¡†æ¶é—®é¢˜
```bash
# æ£€æŸ¥ Ray é›†ç¾¤çŠ¶æ€
ray status

# é‡æ–°å¯åŠ¨ Ray é›†ç¾¤
ray stop && ray start --head --port=6379

# æ£€æŸ¥ Dask é›†ç¾¤
python -c "from dask.distributed import Client; print(Client());"
```

### ğŸ”§ æ€§èƒ½ä¼˜åŒ–é—®é¢˜
```bash
# è®¾ç½®ç³»ç»Ÿæ€§èƒ½å‚æ•°
echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf
echo 'net.core.rmem_max = 134217728' | sudo tee -a /etc/sysctl.conf
echo 'net.core.wmem_max = 134217728' | sudo tee -a /etc/sysctl.conf
sudo sysctl -p

# æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨
htop && free -h && df -h
```

---

## ğŸ“ å¼€å‘è®°å½•

**å®Œæˆæ—¶é—´**: ___________
**å®é™…è€—æ—¶**: ___________

### é‡åˆ°çš„é—®é¢˜
1.
2.
3.

### è§£å†³æ–¹æ¡ˆ
1.
2.
3.

### å­¦åˆ°çš„ç»éªŒ
1.
2.
3.

---

## ğŸ¯ ä¸‹ä¸€æ­¥ï¼šä¸“ä¸šé‡åŒ–å¼€å‘

ğŸ‰ **æ­å–œï¼æ‚¨å·²æˆåŠŸå»ºç«‹ä¼ä¸šçº§é‡åŒ–äº¤æ˜“å¼€å‘ç¯å¢ƒ**

### ğŸ“‹ ç«‹å³è¡ŒåŠ¨é¡¹

1. **æäº¤ä¸“ä¸šç¯å¢ƒé…ç½®**:
   ```bash
   git add .
   git commit -m "feat: å®Œæˆä¼ä¸šçº§é‡åŒ–å¼€å‘ç¯å¢ƒæ­å»º

   âœ¨ ä¸“ä¸šæŠ€æœ¯æ ˆ:
   - é›†æˆ ClickHouse/Redis/PostgreSQL ä¸“ä¸šæ•°æ®åº“
   - é…ç½® Ray/Dask/Polars é«˜æ€§èƒ½è®¡ç®—æ¡†æ¶
   - å»ºç«‹ Bronze/Silver/Gold æ•°æ®æ¹–æ¶æ„
   - å®ç°å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ (Docker/Docker Compose)
   - é…ç½® Prometheus/Grafana ä¸“ä¸šç›‘æ§ç³»ç»Ÿ

   ğŸ”§ æ€§èƒ½ä¼˜åŒ–:
   - æ”¯æŒ 32GB+ å†…å­˜å’Œ 16+ æ ¸å¿ƒé…ç½®
   - è¶…ä½å»¶è¿Ÿäº¤æ˜“ç³»ç»Ÿå‚æ•°è°ƒä¼˜
   - åˆ†å¸ƒå¼è®¡ç®—é›†ç¾¤å°±ç»ª
   - JIT ç¼–è¯‘å’Œæ€§èƒ½åˆ†æå·¥å…·é›†æˆ

   ğŸ“ˆ é‡åŒ–ä¸“ç”¨:
   - VectorBT/Zipline/QuantLib ä¸“ä¸šæ¡†æ¶
   - æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒç¯å¢ƒ
   - ä¸“ä¸šé£é™©ç®¡ç†æ¨¡å—
   - ä¼ä¸šçº§å®‰å…¨å’Œè´¨é‡ä¿è¯"
   ```

2. **å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ**:
   ```bash
   # å¯åŠ¨æ‰€æœ‰æœåŠ¡ (æ•°æ®åº“ + ç›‘æ§ + è®¡ç®—)
   ./scripts/setup/start_dev.sh

   # æˆ–ä½¿ç”¨ Docker ç¯å¢ƒ
   ./scripts/setup/docker_dev.sh
   ```

3. **éªŒè¯ä¸“ä¸šç¯å¢ƒ**:
   ```bash
   # è¿è¡Œä¸“ä¸šç¯å¢ƒéªŒè¯
   python scripts/setup/verify_env.py

   # æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
   docker-compose ps
   ```

### ğŸš€ ä¸“ä¸šå¼€å‘ç¯å¢ƒç‰¹æ€§

**æ‚¨ç°åœ¨æ‹¥æœ‰çš„ä¼ä¸šçº§èƒ½åŠ›ï¼š**

ğŸ—ï¸ **é«˜æ€§èƒ½æ¶æ„**
- Rust é«˜æ€§èƒ½è®¡ç®—å¼•æ“
- åˆ†å¸ƒå¼è®¡ç®—é›†ç¾¤ (Ray/Dask)
- æ—¶åºæ•°æ®åº“ (ClickHouse)
- å†…å­˜ç¼“å­˜ (Redis)

ğŸ“Š **æ•°æ®æ¹–æ¶æ„**
- Bronze: åŸå§‹æ•°æ®å­˜å‚¨
- Silver: æ¸…æ´—å’Œç‰¹å¾å·¥ç¨‹
- Gold: ä¿¡å·å’ŒæŠ•èµ„ç»„åˆ

ğŸ”¬ **é‡åŒ–ç ”ç©¶å·¥å…·**
- VectorBT: å‘é‡åŒ–å›æµ‹
- Zipline: äº‹ä»¶é©±åŠ¨å›æµ‹
- QuantLib: é‡‘èè¡ç”Ÿå“å®šä»·
- ä¸“ä¸šæœºå™¨å­¦ä¹ æ¡†æ¶

ğŸ“ˆ **ä¸“ä¸šç›‘æ§**
- Prometheus: æŒ‡æ ‡æ”¶é›†
- Grafana: å¯è§†åŒ–é¢æ¿
- ç»“æ„åŒ–æ—¥å¿—
- æ€§èƒ½åˆ†æ

### ğŸ¯ å³å°†å¼€å§‹ï¼šç¬¬äºŒé˜¶æ®µ

**ä¸‹ä¸€æ­¥**: [12-ç¬¬äºŒé˜¶æ®µ-åŸºç¡€æ¡†æ¶.md](./12-ç¬¬äºŒé˜¶æ®µ-åŸºç¡€æ¡†æ¶.md)

æ‚¨å°†å¼€å§‹æ„å»ºï¼š
- ğŸ¦€ Rust é«˜æ€§èƒ½æ•°æ®å¼•æ“
- ğŸ Python ç­–ç•¥æ¥å£å±‚
- ğŸ“Š å®æ—¶æ•°æ®å¤„ç†ç®¡é“
- âš¡ è¶…ä½å»¶è¿Ÿæ‰§è¡Œç³»ç»Ÿ

**ğŸ”¥ å‡†å¤‡å¥½äº†å—ï¼Ÿ** æ‚¨ç°åœ¨æ‹¥æœ‰çš„æ˜¯çœŸæ­£çš„**é‡åŒ–åŸºé‡‘çº§åˆ«çš„å¼€å‘ç¯å¢ƒ**ï¼è¿™æ˜¯ä¸“ä¸šé‡åŒ–å·¥ç¨‹å¸ˆçš„æ—¥å¸¸å·¥ä½œç¯å¢ƒã€‚è®©æˆ‘ä»¬å¼€å§‹æ„å»ºé«˜é¢‘äº¤æ˜“ç³»ç»Ÿå§ï¼ğŸš€ğŸ“ˆğŸ’°