# ç¬¬ä¸€é˜¶æ®µï¼šå¼€å‘çŽ¯å¢ƒæ­å»º

> **ç›®æ ‡**: å»ºç«‹å®Œæ•´çš„ Rust+Python æ··åˆå¼€å‘çŽ¯å¢ƒ
> **é¢„è®¡æ—¶é—´**: 1-2å¤©
> **æäº¤æ ‡è®°**: `first-commit`

## ðŸ“‹ æ­¥éª¤æ¦‚è§ˆ

1. [âœ…] ç³»ç»Ÿè¦æ±‚æ£€æŸ¥
2. [ ] Rust çŽ¯å¢ƒå®‰è£…
3. [ ] Python çŽ¯å¢ƒé…ç½®
4. [ ] é¡¹ç›®ç»“æž„åˆ›å»º
5. [ ] å¼€å‘å·¥å…·é…ç½®
6. [ ] çŽ¯å¢ƒéªŒè¯æµ‹è¯•

---

## æ­¥éª¤ 1: ç³»ç»Ÿè¦æ±‚æ£€æŸ¥

### 1.1 æ“ä½œç³»ç»Ÿæ”¯æŒ
- âœ… **Linux** (Ubuntu 20.04+, CentOS 8+)
- âœ… **macOS** (10.15+)
- âœ… **Windows 10/11** (WSL2 å¼ºçƒˆæŽ¨è)

### 1.2 ç¡¬ä»¶è¦æ±‚
- **å†…å­˜**: 8GB+ (æŽ¨è 16GB)
- **å­˜å‚¨**: 10GB+ å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿žæŽ¥

### 1.3 å¿…éœ€è½¯ä»¶
- **Git**: ç”¨äºŽç‰ˆæœ¬æŽ§åˆ¶
- **Python**: 3.8+ (æŽ¨è 3.11)
- **Rust**: 1.70+ (æœ€æ–°ç¨³å®šç‰ˆ)

**æ£€æŸ¥å‘½ä»¤**:
```bash
# æ£€æŸ¥ç³»ç»Ÿä¿¡æ¯
uname -a
python3 --version
git --version
```

---

## æ­¥éª¤ 2: Rust çŽ¯å¢ƒå®‰è£…

### 2.1 å®‰è£… Rust

**Linux/macOS**:
```bash
# å®˜æ–¹æŽ¨èå®‰è£…æ–¹å¼
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# æŒ‰æç¤ºè¾“å…¥ 1 é€‰æ‹©é»˜è®¤å®‰è£…
# å®‰è£…å®ŒæˆåŽé‡æ–°åŠ è½½çŽ¯å¢ƒå˜é‡
source ~/.cargo/env
```

**Windows**:
1. ä¸‹è½½ [rustup-init.exe](https://rustup.rs/)
2. åŒå‡»è¿è¡Œï¼ŒæŒ‰æç¤ºå®‰è£…
3. é‡å¯å‘½ä»¤è¡Œæˆ– PowerShell

### 2.2 éªŒè¯ Rust å®‰è£…

```bash
# æ£€æŸ¥ç‰ˆæœ¬
rustc --version
cargo --version

# åº”è¯¥æ˜¾ç¤ºç±»ä¼¼ä¿¡æ¯ï¼š
# rustc 1.75.0 (82e1608df 2023-12-21)
# cargo 1.75.0 (1d8b23c2c 2023-12-21)
```

### 2.3 å®‰è£… Rust å¼€å‘å·¥å…·

```bash
# å®‰è£…å¸¸ç”¨ç»„ä»¶
rustup component add rustfmt clippy

# å®‰è£…å¸¸ç”¨å·¥å…·
cargo install cargo-watch  # è‡ªåŠ¨é‡æ–°ç¼–è¯‘
cargo install cargo-expand  # å®å±•å¼€å·¥å…·
```

### 2.4 é…ç½® Cargo ä¼˜åŒ–

åˆ›å»º `~/.cargo/config.toml` æ–‡ä»¶ï¼š

```toml
# ~/.cargo/config.toml

[build]
# å¯ç”¨å¹¶è¡Œç¼–è¯‘
jobs = 4

[target.x86_64-unknown-linux-gnu]
# Linux ä¼˜åŒ–é…ç½®
rustflags = ["-C", "target-cpu=native"]

[target.x86_64-apple-darwin]
# macOS ä¼˜åŒ–é…ç½®
rustflags = ["-C", "target-cpu=native"]

[target.x86_64-pc-windows-msvc]
# Windows ä¼˜åŒ–é…ç½®
rustflags = ["-C", "target-cpu=native"]

[registry]
# ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿä¸‹è½½
# (å¯é€‰ï¼Œæ ¹æ®ç½‘ç»œæƒ…å†µé€‰æ‹©)
# index = "https://mirrors.ustc.edu.cn/crates.io-index/"
```

---

## æ­¥éª¤ 3: Python çŽ¯å¢ƒé…ç½®

### 3.1 å®‰è£… Python (å¦‚æžœéœ€è¦)

**Ubuntu/Debian**:
```bash
sudo apt update
sudo apt install python3 python3-pip python3-venv
```

**macOS** (æŽ¨èä½¿ç”¨ Homebrew):
```bash
brew install python@3.11
```

**Windows**:
1. ä»Ž [python.org](https://www.python.org/downloads/) ä¸‹è½½å®‰è£…åŒ…
2. å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH"

### 3.2 å®‰è£… Poetry

Poetry æ˜¯çŽ°ä»£ Python ä¾èµ–ç®¡ç†å’Œæ‰“åŒ…å·¥å…·ã€‚

**Linux/macOS**:
```bash
# å®˜æ–¹æŽ¨èå®‰è£…æ–¹å¼
curl -sSL https://install.python-poetry.org | python3 -

# é‡æ–°åŠ è½½çŽ¯å¢ƒå˜é‡
source ~/.bashrc  # æˆ– ~/.zshrc
```

**Windows** (PowerShell):
```powershell
# ä½¿ç”¨ PowerShell å®‰è£…
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python3 -
```

**éªŒè¯ Poetry å®‰è£…**:
```bash
poetry --version
# åº”è¯¥æ˜¾ç¤ºç±»ä¼¼: Poetry (version 1.7.1)
```

### 3.3 é…ç½® Poetry

```bash
# åˆ›å»ºé…ç½®ç›®å½•
mkdir -p ~/.config/pypoetry

# é…ç½®è™šæ‹ŸçŽ¯å¢ƒåœ¨é¡¹ç›®å†…åˆ›å»º
poetry config virtualenvs.in-project true

# é…ç½®ä½¿ç”¨å›½å†…é•œåƒæº (å¯é€‰ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦)
poetry source add --priority=primary tsinghua https://pypi.tuna.tsinghua.edu.cn/simple/
```

### 3.4 åˆ›å»ºé¡¹ç›®ç›®å½•

```bash
# è¿›å…¥æ‚¨çš„å·¥ä½œç›®å½•
cd ~/Projects  # æˆ–æ‚¨å–œæ¬¢çš„ä»»ä½•ç›®å½•

# åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•
mkdir PulseTrader
cd PulseTrader

# éªŒè¯å½“å‰ä½ç½®
pwd  # åº”è¯¥æ˜¾ç¤º ~/Projects/PulseTrader
```

---

## æ­¥éª¤ 4: é¡¹ç›®ç»“æž„åˆ›å»º

### 4.1 åˆ›å»ºåŸºç¡€ç›®å½•ç»“æž„

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½• (~/Projects/PulseTrader) ä¸‹æ‰§è¡Œ

# Rust å¼•æ“Žç›®å½•
mkdir -p engine/src/{data,indicators,risk,execution,ffi,utils}
mkdir -p engine/tests/{unit,integration}

# Python æŽ¥å£ç›®å½•
mkdir -p python/pulse_trader/{engine,strategies,backtest,analysis,utils}
mkdir -p python/tests/{unit,integration}

# æ•°æ®å­˜å‚¨ç›®å½•
mkdir -p data/{raw,processed,cache,storage}
mkdir -p data/logs

# é…ç½®å’Œæ–‡æ¡£ç›®å½•
mkdir -p config
mkdir -p docs
mkdir -p examples
mkdir -p scripts

# åˆ›å»º .gitkeep æ–‡ä»¶ä¿æŒç©ºç›®å½•
touch data/raw/.gitkeep
touch data/processed/.gitkeep
touch data/cache/.gitkeep
touch data/logs/.gitkeep
```

### 4.2 åˆå§‹åŒ– Rust é¡¹ç›®

```bash
# è¿›å…¥ engine ç›®å½•å¹¶åˆå§‹åŒ–
cd engine
cargo init --lib

# éªŒè¯åˆå§‹åŒ–
ls -la  # åº”è¯¥çœ‹åˆ° Cargo.toml å’Œ src/ ç›®å½•
cat src/lib.rs  # åº”è¯¥æœ‰åŸºç¡€çš„ Rust ä»£ç 

# é€æ­¥æ·»åŠ ä¾èµ–åˆ° Cargo.toml

# ç¬¬ä¸€æ­¥ï¼šæ·»åŠ åŸºç¡€ä¾èµ–
cargo add pyo3 --features "extension-module abi3-py38"
cargo add numpy

# ç¬¬äºŒæ­¥ï¼šæ·»åŠ æ•°æ®å¤„ç†ä¾èµ–
cargo add polars --features "lazy temporal strings"
cargo add serde --features "derive"
cargo add serde_json

# ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ å¼‚æ­¥è¿è¡Œæ—¶
cargo add tokio --features "full"
cargo add tokio-util

# ç¬¬å››æ­¥ï¼šæ·»åŠ æ•°å­¦å’Œç½‘ç»œä¾èµ–
cargo add num-complex
cargo add ordered-float
cargo add reqwest --features "json cookies"

# ç¬¬äº”æ­¥ï¼šæ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—
cargo add anyhow
cargo add thiserror
cargo add tracing
cargo add tracing-subscriber --features "env-filter"

# ç¬¬å…­æ­¥ï¼šæ·»åŠ æ—¶é—´å’Œé…ç½®ä¾èµ–
cargo add chrono --features "serde"
cargo add config
cargo add toml

# ç¬¬ä¸ƒæ­¥ï¼šæ·»åŠ æµ‹è¯•åŸºå‡†å·¥å…·
cargo add --dev tokio-test
cargo add --dev tempfile
cargo add --dev criterion --features "html_reports"

# æ‰‹åŠ¨ç¼–è¾‘ Cargo.toml æ·»åŠ å‘å¸ƒé…ç½®å’Œåº“ç±»åž‹
cat >> Cargo.toml << 'EOF'

# é…ç½®åº“ç±»åž‹
[lib]
name = "pulse_trader_engine"
crate-type = ["cdylib", "rlib"]

# åŸºå‡†æµ‹è¯•é…ç½®
[[bench]]
name = "indicators"
harness = false

# å‘å¸ƒä¼˜åŒ–é…ç½®
[profile.release]
opt-level = 3
lto = true
codegen-units = 1
panic = "abort"

# å¼€å‘é…ç½®
[profile.dev]
opt-level = 1
debug = true
EOF

# éªŒè¯ Cargo.toml é…ç½®
cat Cargo.toml

# æµ‹è¯•ç¼–è¯‘
cargo check
cargo build

# è¿è¡Œæµ‹è¯•ç¡®ä¿ä¸€åˆ‡æ­£å¸¸
cargo test

cd ..  # è¿”å›žé¡¹ç›®æ ¹ç›®å½•
```

### 4.3 é…ç½® Python é¡¹ç›®

```bash
# ä½¿ç”¨ Poetry åˆ›å»º Python é¡¹ç›®
cd python

# åˆå§‹åŒ– Poetry é¡¹ç›®
poetry init --no-interaction --name="pulse-trader" --description="Aè‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ" --author="Your Name <your.email@example.com>"

# æ·»åŠ æ ¸å¿ƒä¾èµ– (æ‰¹é‡æ·»åŠ )
poetry add pandas numpy matplotlib plotly scikit-learn requests fastapi uvicorn sqlalchemy python-dotenv pyyaml tushare akshare pytdx maturin

# æ·»åŠ å¼€å‘ä¾èµ–
poetry add --group dev pytest pytest-cov black flake8 mypy pre-commit

# æŸ¥çœ‹ç”Ÿæˆçš„ pyproject.toml
cat pyproject.toml

# å®‰è£…ä¾èµ–
poetry install

# éªŒè¯å®‰è£…
poetry run python -c "import pandas, numpy, tushare, akshare; print('Python åŒ…å®‰è£…æˆåŠŸ')"

cd ..  # è¿”å›žé¡¹ç›®æ ¹ç›®å½•
```

### 4.4 åˆ›å»º pyproject.toml çš„ä¼˜åŒ–é…ç½®

Poetry ä¼šè‡ªåŠ¨ç”Ÿæˆ `python/pyproject.toml` æ–‡ä»¶ã€‚ä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§å’Œæ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼š

```bash
# ç¼–è¾‘ python/pyproject.toml æ–‡ä»¶
cat >> python/pyproject.toml << 'EOF'

# æž„å»ºé…ç½®
[build-system]
requires = ["maturin>=1.4,<2.0"]
build-backend = "maturin"

[tool.maturin]
features = ["pyo3/extension-module"]
module-name = "pulse_trader_engine._pulse_trader_engine"
python-source = "python"

# Black ä»£ç æ ¼å¼åŒ–é…ç½®
[tool.black]
line-length = 88
target-version = ['py38']
include = '\.pyi?$'

# Pytest é…ç½®
[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
addopts = "-v --tb=short --strict-markers"
markers = [
    "slow: marks tests as slow",
    "integration: marks tests as integration tests",
    "unit: marks tests as unit tests",
]

# MyPy ç±»åž‹æ£€æŸ¥é…ç½®
[tool.mypy]
python_version = "3.8"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
EOF
```

---

## æ­¥éª¤ 5: å¼€å‘å·¥å…·é…ç½®

### 5.1 åˆ›å»º .gitignore

```bash
cat > .gitignore << 'EOF'
# Rust
target/
Cargo.lock
**/*.rs.bk
.cargo/

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# è™šæ‹ŸçŽ¯å¢ƒ
.venv/
venv/
env/
ENV/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db

# æ•°æ®æ–‡ä»¶
data/raw/*
data/processed/*
data/cache/*
data/storage/*.db
data/logs/*.log

# é…ç½®æ–‡ä»¶ (åŒ…å«æ•æ„Ÿä¿¡æ¯)
config/.env
.env.local
.env.production

# æµ‹è¯•å’Œè¦†ç›–çŽ‡
.coverage
htmlcov/
.pytest_cache/
.tox/

# Jupyter
.ipynb_checkpoints/

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.temp
temp/
EOF
```

### 5.2 åˆ›å»ºé¡¹ç›®é…ç½®æ–‡ä»¶

```bash
# åˆ›å»ºçŽ¯å¢ƒå˜é‡æ¨¡æ¿
cat > config/.env.example << 'EOF'
# æ•°æ®æºé…ç½®
TUSHARE_TOKEN=your_tushare_token_here
AKSHARE_CACHE_ENABLED=true
PYTDX_SERVER=119.147.212.81
PYTDX_PORT=7709

# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///data/storage/trading.db
REDIS_URL=redis://localhost:6379/0

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE=data/logs/pulse_trader.log

# äº¤æ˜“é…ç½®
DEFAULT_CAPITAL=1000000
COMMISSION_RATE=0.001
SLIPPAGE_RATE=0.001
MAX_POSITION_SIZE=0.2

# é£Žé™©ç®¡ç†
MAX_DRAWDOWN=0.15
RISK_FREE_RATE=0.03
EOF

# åˆ›å»ºä¸»é…ç½®æ–‡ä»¶
cat > config/config.yaml << 'EOF'
# PulseTrader ä¸»é…ç½®æ–‡ä»¶

app:
  name: "PulseTrader"
  version: "0.1.0"
  debug: true
  environment: "development"

data_sources:
  primary: "akshare"
  fallback: "tushare"
  real_time: "pytdx"

  tushare:
    token: "${TUSHARE_TOKEN}"
    pro_api: "https://api.tushare.pro"
    rate_limit: 200  # æ¯åˆ†é’Ÿè¯·æ±‚æ¬¡æ•°

  akshare:
    cache_enabled: true
    cache_dir: "data/cache/akshare"
    timeout: 30

  pytdx:
    servers:
      - host: "119.147.212.81"
        port: 7709
        name: "ä¸Šæµ·æœŸè´§"
      - host: "202.108.253.130"
        port: 7709
        name: "æ·±åœ³æœŸè´§"
    timeout: 5
    retry_count: 3

database:
  type: "sqlite"
  url: "sqlite:///data/storage/trading.db"
  pool_size: 10

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "data/logs/pulse_trader.log"
  max_size: "100MB"
  backup_count: 5
EOF
```

### 5.3 åˆ›å»ºå¼€å‘è„šæœ¬

```bash
# åˆ›å»ºè„šæœ¬ç›®å½• (å¦‚æžœè¿˜æ²¡æœ‰)
mkdir -p scripts

# åˆ›å»ºçŽ¯å¢ƒéªŒè¯è„šæœ¬
cat > scripts/verify_env.py << 'EOF'
#!/usr/bin/env python3
"""
å¼€å‘çŽ¯å¢ƒéªŒè¯è„šæœ¬
"""
import sys
import subprocess
import importlib
import os

def check_rust():
    """æ£€æŸ¥ Rust çŽ¯å¢ƒ"""
    try:
        result = subprocess.run(['cargo', '--version'],
                              capture_output=True, text=True)
        if result.returncode == 0:
            print(f"âœ… Rust: {result.stdout.strip()}")
            return True
        else:
            print("âŒ Rust æœªæ­£ç¡®å®‰è£…")
            return False
    except FileNotFoundError:
        print("âŒ Rust æœªå®‰è£…")
        return False

def check_python():
    """æ£€æŸ¥ Python çŽ¯å¢ƒ"""
    version = sys.version_info
    if version >= (3, 8):
        print(f"âœ… Python: {version.major}.{version.minor}.{version.micro}")
        return True
    else:
        print(f"âŒ Python ç‰ˆæœ¬è¿‡ä½Ž: {version.major}.{version.minor}")
        print("   éœ€è¦ Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬")
        return False

def check_packages():
    """æ£€æŸ¥å¿…éœ€çš„ Python åŒ…"""
    required_packages = [
        'maturin', 'pandas', 'numpy', 'matplotlib',
        'tushare', 'akshare', 'pytdx', 'pytest', 'poetry'
    ]

    missing_packages = []
    for package in required_packages:
        try:
            importlib.import_module(package)
            print(f"âœ… {package}")
        except ImportError:
            print(f"âŒ {package} æœªå®‰è£…")
            missing_packages.append(package)

    return len(missing_packages) == 0

def check_poetry():
    """æ£€æŸ¥ Poetry é…ç½®"""
    try:
        import subprocess
        result = subprocess.run(['poetry', '--version'],
                              capture_output=True, text=True)
        if result.returncode == 0:
            print(f"âœ… Poetry: {result.stdout.strip()}")

            # æ£€æŸ¥é¡¹ç›®æ˜¯å¦ä½¿ç”¨ Poetry
            if os.path.exists('python/pyproject.toml'):
                result = subprocess.run(['poetry', 'check'],
                                      cwd='python',
                                      capture_output=True, text=True)
                if result.returncode == 0:
                    print("âœ… Poetry é¡¹ç›®é…ç½®æ­£ç¡®")
                    return True
                else:
                    print("âŒ Poetry é¡¹ç›®é…ç½®æœ‰è¯¯")
                    return False
            else:
                print("âŒ æœªæ‰¾åˆ° pyproject.toml æ–‡ä»¶")
                return False
        else:
            print("âŒ Poetry æœªæ­£ç¡®å®‰è£…")
            return False
    except FileNotFoundError:
        print("âŒ Poetry æœªå®‰è£…")
        return False

def check_project_structure():
    """æ£€æŸ¥é¡¹ç›®ç›®å½•ç»“æž„"""
    required_dirs = [
        'engine/src', 'python/pulse_trader',
        'data', 'config', 'scripts'
    ]

    for directory in required_dirs:
        if os.path.exists(directory):
            print(f"âœ… {directory}/")
        else:
            print(f"âŒ {directory}/ ä¸å­˜åœ¨")
            return False

    return True

def main():
    """ä¸»éªŒè¯å‡½æ•°"""
    print("ðŸ” éªŒè¯å¼€å‘çŽ¯å¢ƒ...")
    print("=" * 50)

    checks = [
        ("Rust çŽ¯å¢ƒ", check_rust),
        ("Python çŽ¯å¢ƒ", check_python),
        ("Poetry é…ç½®", check_poetry),
        ("Python åŒ…", check_packages),
        ("é¡¹ç›®ç»“æž„", check_project_structure),
    ]

    all_passed = True
    for name, check_func in checks:
        print(f"\nðŸ“‹ æ£€æŸ¥ {name}:")
        if not check_func():
            all_passed = False

    print("\n" + "=" * 50)
    if all_passed:
        print("ðŸŽ‰ çŽ¯å¢ƒéªŒè¯é€šè¿‡ï¼å¯ä»¥å¼€å§‹å¼€å‘äº† ðŸš€")
    else:
        print("âš ï¸  çŽ¯å¢ƒéªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°é—®é¢˜")
        print("\nðŸ’¡ è§£å†³å»ºè®®:")
        print("1. ç¡®ä¿å·²å®‰è£… Rust å’Œ Python 3.8+")
        print("2. å®‰è£… Poetry: curl -sSL https://install.python-poetry.org | python3 -")
        print("3. å®‰è£… Python ä¾èµ–: cd python && poetry install && cd ..")
        print("4. ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œæ­¤è„šæœ¬")

if __name__ == "__main__":
    main()
EOF

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/verify_env.py
```

### 5.4 é…ç½® Git ä»“åº“

```bash
# åˆå§‹åŒ– Git ä»“åº“
git init

# é…ç½®ç”¨æˆ·ä¿¡æ¯ (å¦‚æžœè¿˜æ²¡æœ‰)
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# åˆ›å»ºåˆå§‹æäº¤
git add .
git commit -m "feat: åˆå§‹åŒ–é¡¹ç›®ç»“æž„å’Œå¼€å‘çŽ¯å¢ƒ

- é…ç½® Rust å¼•æ“ŽçŽ¯å¢ƒ
- è®¾ç½® Python è™šæ‹ŸçŽ¯å¢ƒå’Œä¾èµ–
- åˆ›å»ºåŸºç¡€é¡¹ç›®ç›®å½•ç»“æž„
- æ·»åŠ å¼€å‘å·¥å…·å’Œé…ç½®æ–‡ä»¶
- åˆ›å»ºçŽ¯å¢ƒéªŒè¯è„šæœ¬"
```

---

## æ­¥éª¤ 6: çŽ¯å¢ƒéªŒè¯æµ‹è¯•

### 6.1 è¿è¡ŒéªŒè¯è„šæœ¬

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
pwd  # åº”è¯¥æ˜¾ç¤º ~/Projects/PulseTrader

# ç¡®ä¿è™šæ‹ŸçŽ¯å¢ƒå·²æ¿€æ´»
# Linux/macOS: source .venv/bin/activate
# Windows: .\.venv\Scripts\Activate.ps1

# è¿è¡ŒéªŒè¯è„šæœ¬
python scripts/verify_env.py
```

**é¢„æœŸè¾“å‡º**:
```
ðŸ” éªŒè¯å¼€å‘çŽ¯å¢ƒ...
==================================================

ðŸ“‹ æ£€æŸ¥ Rust çŽ¯å¢ƒ:
âœ… Rust: cargo 1.75.0 (1d8b23c2c 2023-12-21)

ðŸ“‹ æ£€æŸ¥ Python çŽ¯å¢ƒ:
âœ… Python: 3.11.6

ðŸ“‹ æ£€æŸ¥ Python åŒ…:
âœ… maturin
âœ… pandas
âœ… numpy
âœ… matplotlib
âœ… tushare
âœ… akshare
âœ… pytdx
âœ… pytest

ðŸ“‹ æ£€æŸ¥é¡¹ç›®ç»“æž„:
âœ… engine/src/
âœ… python/pulse_trader/
âœ… data/
âœ… config/
âœ… scripts/

==================================================
ðŸŽ‰ çŽ¯å¢ƒéªŒè¯é€šè¿‡ï¼å¯ä»¥å¼€å§‹å¼€å‘äº† ðŸš€
```

### 6.2 Rust ç¼–è¯‘æµ‹è¯•

```bash
# æµ‹è¯• Rust é¡¹ç›®ç¼–è¯‘
cd engine
cargo check
cargo build
cargo test
cd ..

# å¦‚æžœç¼–è¯‘æˆåŠŸï¼Œè¯´æ˜Ž Rust çŽ¯å¢ƒé…ç½®æ­£ç¡®
```

### 6.3 Python çŽ¯å¢ƒæµ‹è¯•

```bash
# ä½¿ç”¨ Poetry æµ‹è¯• Python åŒ…å¯¼å…¥
cd python
poetry run python -c "
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import tushare as ts
import akshare as ak
import pytdx as td
print('âœ… æ‰€æœ‰ Python åŒ…å¯¼å…¥æˆåŠŸ')
"

# æµ‹è¯• pytest
poetry run pytest --version

# è¿è¡Œæµ‹è¯• (å¦‚æžœæœ‰æµ‹è¯•æ–‡ä»¶)
poetry run pytest tests/ -v

cd ..
```

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

åœ¨ç»§ç»­ä¸‹ä¸€é˜¶æ®µä¹‹å‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®éƒ½å·²å®Œæˆï¼š

### çŽ¯å¢ƒé…ç½®
- [ ] Rust 1.70+ å·²å®‰è£…å¹¶å¯æ­£å¸¸ä½¿ç”¨
- [ ] Python 3.8+ å·²å®‰è£…
- [ ] Poetry å·²å®‰è£…å¹¶é…ç½®
- [ ] Poetry é¡¹ç›®å·²åˆå§‹åŒ–
- [ ] æ‰€æœ‰å¿…éœ€çš„ Python åŒ…å·²é€šè¿‡ Poetry å®‰è£…

### é¡¹ç›®ç»“æž„
- [ ] åŸºç¡€ç›®å½•ç»“æž„å·²åˆ›å»º
- [ ] Rust é¡¹ç›®å·²åˆå§‹åŒ– (`engine/Cargo.toml` å­˜åœ¨)
- [ ] Poetry é¡¹ç›®å·²åˆå§‹åŒ– (`python/pyproject.toml` å­˜åœ¨)

### é…ç½®æ–‡ä»¶
- [ ] `.gitignore` æ–‡ä»¶å·²åˆ›å»º
- [ ] çŽ¯å¢ƒå˜é‡æ¨¡æ¿å·²åˆ›å»º (`config/.env.example`)
- [ ] ä¸»é…ç½®æ–‡ä»¶å·²åˆ›å»º (`config/config.yaml`)
- [ ] Poetry é…ç½®æ–‡ä»¶å·²åˆ›å»º (`python/pyproject.toml`)
- [ ] Maturin æž„å»ºé…ç½®å·²æ·»åŠ 

### éªŒè¯æµ‹è¯•
- [ ] `python scripts/verify_env.py` è¿è¡ŒæˆåŠŸ
- [ ] `cd engine && cargo check` ç¼–è¯‘æ— é”™è¯¯
- [ ] `cd engine && cargo test` æµ‹è¯•é€šè¿‡
- [ ] `cd python && poetry run python -c "import pandas, numpy, tushare, akshare; print('Python åŒ…å¯¼å…¥æˆåŠŸ')"`

### Git æäº¤
- [ ] æ‰€æœ‰æ–‡ä»¶å·²æäº¤åˆ° Git ä»“åº“
- [ ] æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒ

---

## ðŸš¨ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1: Rust å®‰è£…åŽå‘½ä»¤æ‰¾ä¸åˆ°
**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°åŠ è½½çŽ¯å¢ƒå˜é‡
source ~/.cargo/env

# æˆ–è€…é‡å¯ç»ˆç«¯
```

### é—®é¢˜ 2: Poetry å®‰è£…å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿è·¯å¾„åœ¨ PATH ä¸­
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# æˆ–è€…ä½¿ç”¨ pip å®‰è£…
pip install poetry

# éªŒè¯å®‰è£…
poetry --version
```

### é—®é¢˜ 3: Python ä¾èµ–å®‰è£…å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```bash
# è¿›å…¥ Python ç›®å½•
cd python

# ä½¿ç”¨ Poetry å®‰è£…ä¾èµ–
poetry install

# å¦‚æžœç½‘ç»œé—®é¢˜ï¼Œä½¿ç”¨å›½å†…é•œåƒ
poetry source add --priority=primary tsinghua https://pypi.tuna.tsinghua.edu.cn/simple/
poetry install

# è¿”å›žé¡¹ç›®æ ¹ç›®å½•
cd ..
```

### é—®é¢˜ 4: Cargo ç¼–è¯‘é€Ÿåº¦æ…¢
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä½¿ç”¨å›½å†…é•œåƒæº
mkdir -p ~/.cargo
cat >> ~/.cargo/config.toml << 'EOF'

[source.crates-io]
replace-with = 'ustc'

[source.ustc]
registry = "https://mirrors.ustc.edu.cn/crates.io-index"
EOF
```

### é—®é¢˜ 5: Poetry è™šæ‹ŸçŽ¯å¢ƒé—®é¢˜
**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
cd python
poetry env remove python
poetry install

# æˆ–è€…å¼ºåˆ¶é‡æ–°å®‰è£…
poetry cache clear pypi --all
poetry install

cd ..
```

### é—®é¢˜ 6: æƒé™é—®é¢˜ (Linux/macOS)
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/*.py scripts/*.sh

# æˆ–ä½¿ç”¨ python ç›´æŽ¥è¿è¡Œ
python scripts/verify_env.py

# ç¡®ä¿ Poetry å¯æ‰§è¡Œæƒé™
chmod +x ~/.local/bin/poetry
```

---

## ðŸ“ å¼€å‘è®°å½•

**å®Œæˆæ—¶é—´**: ___________
**å®žé™…è€—æ—¶**: ___________

### é‡åˆ°çš„é—®é¢˜
1.
2.
3.

### è§£å†³æ–¹æ¡ˆ
1.
2.
3.

### å­¦åˆ°çš„ç»éªŒ
1.
2.
3.

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥

çŽ¯å¢ƒæ­å»ºå®ŒæˆåŽï¼Œæ‚¨å¯ä»¥ï¼š

1. **æäº¤ä»£ç **: `git add . && git commit -m "feat: å®Œæˆç¬¬ä¸€é˜¶æ®µçŽ¯å¢ƒæ­å»º"`

2. **å¼€å§‹ç¬¬äºŒé˜¶æ®µ**:
   ```bash
   # åˆ‡æ¢åˆ°æ–°çš„åŠŸèƒ½åˆ†æ”¯
   git checkout -b feature/second-phase
   ```

3. **é˜…è¯»ä¸‹ä¸€é˜¶æ®µæ–‡æ¡£**: [12-ç¬¬äºŒé˜¶æ®µ-åŸºç¡€æ¡†æž¶.md](./12-ç¬¬äºŒé˜¶æ®µ-åŸºç¡€æ¡†æž¶.md)

**æ­å–œå®Œæˆç¬¬ä¸€é˜¶æ®µï¼** ðŸŽ‰ æ‚¨å·²ç»å»ºç«‹äº†å®Œæ•´çš„å¼€å‘çŽ¯å¢ƒï¼Œå¯ä»¥å¼€å§‹å®žé™…çš„ä»£ç å¼€å‘äº†ã€‚