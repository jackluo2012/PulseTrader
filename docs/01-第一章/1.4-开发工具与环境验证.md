# 1.4 å¼€å‘å·¥å…·ä¸ŽçŽ¯å¢ƒéªŒè¯

## ðŸ“‹ å­¦ä¹ ç›®æ ‡

- å®Œå–„å¼€å‘å·¥å…·é…ç½®
- è®¾ç½®ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·
- è¿›è¡Œå®Œæ•´çš„çŽ¯å¢ƒéªŒè¯
- å»ºç«‹å¼€å‘å·¥ä½œæµ

## â±ï¸ é¢„è®¡å®Œæˆæ—¶é—´

15-20 åˆ†é’Ÿ

---

## æ­¥éª¤ 1ï¼šå®Œå–„ VS Code é…ç½®

### 1.1 åˆ›å»º VS Code å·¥ä½œåŒºé…ç½®

```bash
# åˆ›å»º.vscodeç›®å½•å’Œé…ç½®æ–‡ä»¶
mkdir -p .vscode

# åˆ›å»ºå·¥ä½œåŒºè®¾ç½®
cat > .vscode/settings.json << 'EOF'
{
    "python.defaultInterpreterPath": "./.venv/bin/python",
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": true,
    "python.linting.mypyEnabled": true,
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length=88"],
    "python.sortImports.args": ["--profile", "black"],
    "python.testing.pytestEnabled": true,
    "python.testing.pytestArgs": ["tests"],
    "python.testing.unittestEnabled": false,
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
        "source.organizeImports": true
    },
    "files.exclude": {
        "**/__pycache__": true,
        "**/*.pyc": true,
        "**/.pytest_cache": true,
        "**/.mypy_cache": true
    },
    "files.watcherExclude": {
        "**/__pycache__/**": true,
        "**/.pytest_cache/**": true
    }
}
EOF

# åˆ›å»ºè°ƒè¯•é…ç½®
cat > .vscode/launch.json << 'EOF'
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "env": {
                "PYTHONPATH": "${workspaceFolder}/src"
            }
        },
        {
            "name": "Python: Tests",
            "type": "python",
            "request": "launch",
            "module": "pytest",
            "args": ["tests", "-v"],
            "console": "integratedTerminal",
            "justMyCode": true
        },
        {
            "name": "Python: ClickHouse Test",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/test_clickhouse.py",
            "console": "integratedTerminal",
            "env": {
                "PYTHONPATH": "${workspaceFolder}/src"
            }
        }
    ]
}
EOF

# åˆ›å»ºä»»åŠ¡é…ç½®
cat > .vscode/tasks.json << 'EOF'
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Install Dependencies",
            "type": "shell",
            "command": "pip",
            "args": ["install", "-r", "requirements.txt"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            }
        },
        {
            "label": "Run Tests",
            "type": "shell",
            "command": "pytest",
            "args": ["tests/", "-v"],
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            }
        },
        {
            "label": "Format Code",
            "type": "shell",
            "command": "make",
            "args": ["format"],
            "group": "build"
        },
        {
            "label": "Lint Code",
            "type": "shell",
            "command": "make",
            "args": ["lint"],
            "group": "test"
        }
    ]
}
EOF

# åˆ›å»ºæ‰©å±•æŽ¨è
cat > .vscode/extensions.json << 'EOF'
{
    "recommendations": [
        "ms-python.python",
        "ms-python.pylance",
        "ms-python.black-formatter",
        "ms-python.isort",
        "ms-python.pylint",
        "ms-python.mypy-type-checker",
        "ms-azuretools.vscode-docker",
        "GitHub.copilot",
        "ms-vscode.test-adapter-converter",
        "littlefoxteam.vscode-python-test-adapter",
        "ms-toolsai.jupyter",
        "ms-toolsai.jupyter-keymap",
        "ms-vscode.makefile-tools",
        "eamodio.gitlens"
    ]
}
EOF
```

## æ­¥éª¤ 2ï¼šé…ç½®ä»£ç è´¨é‡å·¥å…·

### 2.1 æ›´æ–° pylint é…ç½®

```bash
# åˆ›å»ºpylinté…ç½®æ–‡ä»¶
cat > .pylintrc << 'EOF'
[MASTER]
init-hook='import sys; sys.path.append("src")'
disable=
    C0114,  # missing-module-docstring
    C0115,  # missing-class-docstring
    C0116,  # missing-function-docstring
    R0903,  # too-few-public-methods
    R0913,  # too-many-arguments

[FORMAT]
max-line-length=88

[DESIGN]
max-locals=15
max-returns=6
max-branches=12
max-statements=50
max-attributes=8
max-public-methods=20

[MISCELLANEOUS]
notes=FIXME,XXX,TODO

[TYPECHECK]
ignored-modules=
    redis,
    clickhouse_driver

[VARIABLES]
init-import=no
dummy-variables-rgx=^_|dummy
ignored-argument-names=_.*|^ignored_|^unused_

[SIMILARITIES]
min-similarity-lines=4
ignore-comments=yes
ignore-docstrings=yes
ignore-imports=no
EOF
```

### 2.2 é…ç½® mypy

```bash
# åˆ›å»ºmypyé…ç½®æ–‡ä»¶
cat > mypy.ini << 'EOF'
[mypy]
python_version = 3.12
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True

[mypy-tests.*]
disallow_untyped_defs = False

[mypy-clickhouse_driver.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

[mypy-pandas.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-akshare.*]
ignore_missing_imports = True

[mypy-scipy.*]
ignore_missing_imports = True

[mypy-sklearn.*]
ignore_missing_imports = True

[mypy-matplotlib.*]
ignore_missing_imports = True

[mypy-plotly.*]
ignore_missing_imports = True

[mypy-seaborn.*]
ignore_missing_imports = True
EOF
```

### 2.3 é…ç½® pytest

```bash
# åˆ›å»ºpytesté…ç½®æ–‡ä»¶
cat > pytest.ini << 'EOF'
[tool:pytest]
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts =
    -v
    --strict-markers
    --strict-config
    --disable-warnings
    --tb=short
markers =
    unit: Unit tests
    integration: Integration tests
    slow: Slow tests
    database: Tests that require database
    external: Tests that require external services
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
EOF
```

## æ­¥éª¤ 3ï¼šåˆ›å»ºæµ‹è¯•åŸºç¡€è®¾æ–½

### 3.1 åˆ›å»ºæµ‹è¯•é…ç½®æ¨¡å—

```bash
# åˆ›å»ºæµ‹è¯•é…ç½®
cat > tests/conftest.py << 'EOF'
"""
pytesté…ç½®å’Œå…±äº«fixtures
"""

import pytest
import os
import sys
from pathlib import Path

# æ·»åŠ srcç›®å½•åˆ°Pythonè·¯å¾„
src_path = Path(__file__).parent.parent / 'src'
sys.path.insert(0, str(src_path))

@pytest.fixture
def sample_stock_data():
    """æä¾›ç¤ºä¾‹è‚¡ç¥¨æ•°æ®"""
    return {
        'symbol': '000001.SZ',
        'name': 'å¹³å®‰é“¶è¡Œ',
        'market': 'SZ',
        'industry': 'é“¶è¡Œ',
        'trade_date': '2024-01-15',
        'open': 10.50,
        'high': 10.80,
        'low': 10.40,
        'close': 10.65,
        'volume': 1000000,
        'amount': 10500000.0
    }

@pytest.fixture
def sample_stock_list():
    """æä¾›ç¤ºä¾‹è‚¡ç¥¨åˆ—è¡¨"""
    return [
        {'symbol': '000001.SZ', 'name': 'å¹³å®‰é“¶è¡Œ', 'market': 'SZ'},
        {'symbol': '600000.SH', 'name': 'æµ¦å‘é“¶è¡Œ', 'market': 'SH'},
        {'symbol': '600036.SH', 'name': 'æ‹›å•†é“¶è¡Œ', 'market': 'SH'}
    ]

@pytest.fixture(autouse=True)
def setup_test_env(monkeypatch):
    """è®¾ç½®æµ‹è¯•çŽ¯å¢ƒå˜é‡"""
    monkeypatch.setenv('APP_ENV', 'testing')
    monkeypatch.setenv('DEBUG', 'False')
    monkeypatch.setenv('LOG_LEVEL', 'ERROR')
    monkeypatch.setenv('CLICKHOUSE_HOST', 'localhost')
    monkeypatch.setenv('CLICKHOUSE_PORT', '8123')
    monkeypatch.setenv('CLICKHOUSE_USER', 'test_user')
    monkeypatch.setenv('CLICKHOUSE_PASSWORD', 'test_password')
    monkeypatch.setenv('CLICKHOUSE_DATABASE', 'test_pulse_trader')
    monkeypatch.setenv('REDIS_HOST', 'localhost')
    monkeypatch.setenv('REDIS_PORT', '6379')
    monkeypatch.setenv('REDIS_DB', '1')
EOF
```

### 3.2 åˆ›å»ºåŸºç¡€æµ‹è¯•

```bash
# åˆ›å»ºå·¥å…·å‡½æ•°æµ‹è¯•
cat > tests/unit/test_helpers.py << 'EOF'
"""
æµ‹è¯•å·¥å…·å‡½æ•°
"""

import pytest
from src.utils.helpers import (
    validate_stock_symbol,
    parse_stock_symbol,
    format_number,
    format_percentage,
    trading_days_between,
    is_trading_day
)

class TestStockSymbol:
    """æµ‹è¯•è‚¡ç¥¨ç¬¦å·ç›¸å…³å‡½æ•°"""

    def test_validate_valid_symbols(self):
        """æµ‹è¯•æœ‰æ•ˆçš„è‚¡ç¥¨ä»£ç """
        valid_symbols = [
            '000001.SZ',
            '600000.SH',
            '600036.SH',
            '688001.SH'
        ]

        for symbol in valid_symbols:
            assert validate_stock_symbol(symbol) is True

    def test_validate_invalid_symbols(self):
        """æµ‹è¯•æ— æ•ˆçš„è‚¡ç¥¨ä»£ç """
        invalid_symbols = [
            '000001',  # ç¼ºå°‘äº¤æ˜“æ‰€
            'SZ000001',  # æ ¼å¼é”™è¯¯
            '000001SZ',  # ç¼ºå°‘ç‚¹
            '000001.SZ1',  # äº¤æ˜“æ‰€é”™è¯¯
            'ABC.SZ',  # éžæ•°å­—ä»£ç 
            '12345.SZ',  # ä»£ç é•¿åº¦é”™è¯¯
            ''  # ç©ºå­—ç¬¦ä¸²
        ]

        for symbol in invalid_symbols:
            assert validate_stock_symbol(symbol) is False

    def test_parse_stock_symbol(self):
        """æµ‹è¯•è‚¡ç¥¨ä»£ç è§£æž"""
        result = parse_stock_symbol('000001.SZ')
        assert result == ('000001', 'SZ')

        result = parse_stock_symbol('600036.SH')
        assert result == ('600036', 'SH')

        result = parse_stock_symbol('invalid')
        assert result is None

class TestFormatFunctions:
    """æµ‹è¯•æ ¼å¼åŒ–å‡½æ•°"""

    def test_format_number(self):
        """æµ‹è¯•æ•°å­—æ ¼å¼åŒ–"""
        assert format_number(1234) == "1.23K"
        assert format_number(1234567) == "1.23M"
        assert format_number(1234567890) == "1.23B"
        assert format_number(123) == "123.00"

    def test_format_percentage(self):
        """æµ‹è¯•ç™¾åˆ†æ¯”æ ¼å¼åŒ–"""
        assert format_percentage(0.1234) == "12.34%"
        assert format_percentage(0.5) == "50.00%"
        assert format_percentage(1.0) == "100.00%"

class TestTradingUtils:
    """æµ‹è¯•äº¤æ˜“å·¥å…·å‡½æ•°"""

    def test_trading_days_between(self):
        """æµ‹è¯•äº¤æ˜“æ—¥è®¡ç®—"""
        # åŒä¸€å‘¨
        days = trading_days_between('2024-01-01', '2024-01-05')
        assert days == 5  # å‘¨ä¸€åˆ°å‘¨äº”

    def test_is_trading_day(self):
        """æµ‹è¯•äº¤æ˜“æ—¥åˆ¤æ–­"""
        import datetime

        # å‘¨ä¸€åº”è¯¥æ˜¯äº¤æ˜“æ—¥
        monday = datetime.date(2024, 1, 8)  # 2024å¹´1æœˆ8æ—¥æ˜¯å‘¨ä¸€
        assert is_trading_day(monday) is True

        # å‘¨å…­ä¸åº”è¯¥äº¤æ˜“æ—¥
        saturday = datetime.date(2024, 1, 6)  # 2024å¹´1æœˆ6æ—¥æ˜¯å‘¨å…­
        assert is_trading_day(saturday) is False

        # å‘¨æ—¥ä¸åº”è¯¥äº¤æ˜“æ—¥
        sunday = datetime.date(2024, 1, 7)  # 2024å¹´1æœˆ7æ—¥æ˜¯å‘¨æ—¥
        assert is_trading_day(sunday) is False
EOF
```

### 3.3 åˆ›å»ºé…ç½®æµ‹è¯•

```bash
# åˆ›å»ºé…ç½®æµ‹è¯•
cat > tests/unit/test_config.py << 'EOF'
"""
æµ‹è¯•é…ç½®ç®¡ç†
"""

import pytest
import os
from src.config import ConfigManager, DatabaseConfig, RedisConfig, AppSettings

class TestConfigManager:
    """æµ‹è¯•é…ç½®ç®¡ç†å™¨"""

    def test_get_database_config(self):
        """æµ‹è¯•æ•°æ®åº“é…ç½®èŽ·å–"""
        # åˆ›å»ºä¸´æ—¶é…ç½®æ–‡ä»¶
        with open('.test_env', 'w') as f:
            f.write("CLICKHOUSE_HOST=test-host\n")
            f.write("CLICKHOUSE_PORT=9999\n")
            f.write("CLICKHOUSE_USER=test-user\n")
            f.write("CLICKHOUSE_PASSWORD=test-pass\n")
            f.write("CLICKHOUSE_DATABASE=test-db\n")

        try:
            config = ConfigManager('.test_env')
            db_config = config.get_database_config()

            assert db_config.host == 'test-host'
            assert db_config.port == 9999
            assert db_config.user == 'test-user'
            assert db_config.password == 'test-pass'
            assert db_config.database == 'test-db'
        finally:
            os.remove('.test_env')

    def test_default_config_values(self):
        """æµ‹è¯•é»˜è®¤é…ç½®å€¼"""
        config = ConfigManager('.nonexistent_env')

        db_config = config.get_database_config()
        assert db_config.host == 'localhost'
        assert db_config.port == 8123

        app_settings = config.get_app_settings()
        assert app_settings.env == 'development'
        assert app_settings.debug is True

    def test_app_settings_paths(self):
        """æµ‹è¯•åº”ç”¨è®¾ç½®è·¯å¾„"""
        settings = AppSettings()

        assert settings.project_root.exists()
        assert settings.data_dir.name == 'data'
        assert settings.config_dir.name == 'config'
        assert settings.logs_dir.name == 'logs'
EOF
```

## æ­¥éª¤ 4ï¼šåˆ›å»ºçŽ¯å¢ƒå®Œæ•´æ€§éªŒè¯

### 4.1 åˆ›å»ºå®Œæ•´çŽ¯å¢ƒæµ‹è¯•

```bash
# åˆ›å»ºå®Œæ•´çŽ¯å¢ƒæµ‹è¯•
cat > test_full_environment.py << 'EOF'
#!/usr/bin/env python3
"""
å®Œæ•´çŽ¯å¢ƒæµ‹è¯•è„šæœ¬
éªŒè¯æ‰€æœ‰ç»„ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ
"""

import sys
import os
import subprocess
import time
from pathlib import Path

def run_command(cmd, description):
    """è¿è¡Œå‘½ä»¤å¹¶æ£€æŸ¥ç»“æžœ"""
    print(f"\n{'='*50}")
    print(f"æµ‹è¯•: {description}")
    print(f"å‘½ä»¤: {cmd}")
    print('-'*50)

    try:
        result = subprocess.run(cmd, shell=True, capture_output=True, text=True, timeout=30)

        if result.returncode == 0:
            print("âœ… æˆåŠŸ")
            if result.stdout.strip():
                print("è¾“å‡º:", result.stdout.strip())
            return True
        else:
            print("âŒ å¤±è´¥")
            if result.stderr.strip():
                print("é”™è¯¯:", result.stderr.strip())
            return False
    except subprocess.TimeoutExpired:
        print("âŒ è¶…æ—¶")
        return False
    except Exception as e:
        print(f"âŒ å¼‚å¸¸: {e}")
        return False

def test_python_environment():
    """æµ‹è¯•PythonçŽ¯å¢ƒ"""
    tests = [
        ('python --version', 'Pythonç‰ˆæœ¬'),
        ('pip --version', 'pipç‰ˆæœ¬'),
        ('poetry --version', 'Poetryç‰ˆæœ¬'),
        ('maturin --version', 'Maturinç‰ˆæœ¬'),
    ]

    return all(run_command(cmd, desc) for cmd, desc in tests)

def test_docker_environment():
    """æµ‹è¯•DockerçŽ¯å¢ƒ"""
    tests = [
        ('docker --version', 'Dockerç‰ˆæœ¬'),
        ('docker-compose --version', 'Docker Composeç‰ˆæœ¬'),
    ]

    # å¦‚æžœDockeræµ‹è¯•å¤±è´¥ï¼Œè·³è¿‡åŽç»­æµ‹è¯•
    docker_ok = all(run_command(cmd, desc) for cmd, desc in tests)

    if docker_ok:
        # æµ‹è¯•DockeræœåŠ¡çŠ¶æ€
        docker_tests = [
            ('docker-compose ps', 'DockeræœåŠ¡çŠ¶æ€'),
            ('curl -s http://localhost:8123/ping', 'ClickHouseè¿žæŽ¥'),
        ]
        return all(run_command(cmd, desc) for cmd, desc in docker_tests)

    return False

def test_project_structure():
    """æµ‹è¯•é¡¹ç›®ç»“æž„"""
    print(f"\n{'='*50}")
    print("æµ‹è¯•: é¡¹ç›®ç»“æž„")
    print('-'*50)

    required_paths = [
        'src',
        'src/config',
        'src/data',
        'src/utils',
        'tests',
        'config',
        'docs',
        '.vscode',
        'pyproject.toml',
        'requirements.txt',
        '.env.example',
        'docker-compose.yml'
    ]

    missing_paths = []
    for path in required_paths:
        if Path(path).exists():
            print(f"âœ… {path}")
        else:
            print(f"âŒ {path}")
            missing_paths.append(path)

    return len(missing_paths) == 0

def test_python_modules():
    """æµ‹è¯•Pythonæ¨¡å—å¯¼å…¥"""
    print(f"\n{'='*50}")
    print("æµ‹è¯•: Pythonæ¨¡å—å¯¼å…¥")
    print('-'*50)

    # æ·»åŠ srcåˆ°Pythonè·¯å¾„
    sys.path.insert(0, 'src')

    modules_to_test = [
        ('config', 'é…ç½®æ¨¡å—'),
        ('utils.helpers', 'å·¥å…·å‡½æ•°æ¨¡å—'),
        ('utils.logging', 'æ—¥å¿—æ¨¡å—'),
        ('utils.datetime_utils', 'æ—¥æœŸå·¥å…·æ¨¡å—'),
    ]

    success_count = 0
    for module, desc in modules_to_test:
        try:
            __import__(module)
            print(f"âœ… {desc}")
            success_count += 1
        except ImportError as e:
            print(f"âŒ {desc}: {e}")

    return success_count == len(modules_to_test)

def test_code_quality_tools():
    """æµ‹è¯•ä»£ç è´¨é‡å·¥å…·"""
    tests = [
        ('black --version', 'Blackä»£ç æ ¼å¼åŒ–å·¥å…·'),
        ('pylint --version', 'Pylintä»£ç æ£€æŸ¥å·¥å…·'),
        ('mypy --version', 'MyPyç±»åž‹æ£€æŸ¥å·¥å…·'),
        ('isort --version', 'isortå¯¼å…¥æŽ’åºå·¥å…·'),
        ('pytest --version', 'pytestæµ‹è¯•æ¡†æž¶'),
    ]

    return all(run_command(cmd, desc) for cmd, desc in tests)

def test_code_quality():
    """æµ‹è¯•ä»£ç è´¨é‡"""
    print(f"\n{'='*50}")
    print("æµ‹è¯•: ä»£ç è´¨é‡æ£€æŸ¥")
    print('-'*50)

    # è¿è¡Œä»£ç æ ¼å¼åŒ–æ£€æŸ¥ï¼ˆä¸ä¿®æ”¹æ–‡ä»¶ï¼‰
    format_check = run_command('black --check src tests --diff', 'Blackæ ¼å¼æ£€æŸ¥')

    # è¿è¡Œå¯¼å…¥æŽ’åºæ£€æŸ¥
    import_check = run_command('isort --check-only src tests --diff', 'isortå¯¼å…¥æ£€æŸ¥')

    # è¿è¡Œpylintæ£€æŸ¥ï¼ˆå…è®¸ä¸€äº›è­¦å‘Šï¼‰
    lint_check = run_command('pylint src --disable=R,C,W --fail-under=8.0', 'Pylintä»£ç æ£€æŸ¥')

    return format_check and import_check and lint_check

def test_unit_tests():
    """è¿è¡Œå•å…ƒæµ‹è¯•"""
    return run_command('python -m pytest tests/unit -v', 'å•å…ƒæµ‹è¯•')

def main():
    """ä¸»æµ‹è¯•å‡½æ•°"""
    print("ðŸš€ PulseTrader å®Œæ•´çŽ¯å¢ƒæµ‹è¯•å¼€å§‹\n")
    print("è¿™ä¸ªæµ‹è¯•å°†éªŒè¯æ‚¨çš„å¼€å‘çŽ¯å¢ƒæ˜¯å¦å®Œå…¨é…ç½®æ­£ç¡®ã€‚\n")

    test_groups = [
        ("PythonçŽ¯å¢ƒ", test_python_environment),
        ("é¡¹ç›®ç»“æž„", test_project_structure),
        ("Pythonæ¨¡å—", test_python_modules),
        ("ä»£ç è´¨é‡å·¥å…·", test_code_quality_tools),
        ("ä»£ç è´¨é‡æ£€æŸ¥", test_code_quality),
        ("å•å…ƒæµ‹è¯•", test_unit_tests),
        ("DockerçŽ¯å¢ƒ", test_docker_environment),
    ]

    results = {}
    for group_name, test_func in test_groups:
        print(f"\nðŸ§ª {group_name}")
        results[group_name] = test_func()

    print(f"\n{'='*60}")
    print("ðŸ“Š æµ‹è¯•ç»“æžœæ±‡æ€»")
    print('='*60)

    all_passed = True
    for group_name, passed in results.items():
        status = "âœ… é€šè¿‡" if passed else "âŒ å¤±è´¥"
        print(f"{group_name:<20} {status}")
        if not passed:
            all_passed = False

    print('='*60)

    if all_passed:
        print("\nðŸŽ‰ æ­å–œï¼æ‰€æœ‰çŽ¯å¢ƒæµ‹è¯•éƒ½é€šè¿‡äº†ï¼")
        print("æ‚¨çš„PulseTraderå¼€å‘çŽ¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªã€‚")
        print("\nðŸš€ çŽ°åœ¨æ‚¨å¯ä»¥ï¼š")
        print("  1. å¼€å§‹ç¬¬äºŒç« ï¼šæ•°æ®èŽ·å–ä¸Žå­˜å‚¨")
        print("  2. è¿è¡Œ 'make help' æŸ¥çœ‹å¯ç”¨å‘½ä»¤")
        print("  3. ä½¿ç”¨VS Codeå¼€å§‹å¼€å‘")
        return 0
    else:
        print("\nâš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æŸ¥çœ‹ä¸Šè¿°é”™è¯¯ä¿¡æ¯å¹¶ä¿®å¤ã€‚")
        print("\nðŸ“ å¸¸è§è§£å†³æ–¹æ¡ˆï¼š")
        print("  1. ç¡®ä¿æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ: source .venv/bin/activate")
        print("  2. å®‰è£…ç¼ºå¤±ä¾èµ–: pip install -r requirements.txt")
        print("  3. æ£€æŸ¥DockeræœåŠ¡: docker-compose up -d")
        print("  4. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯å¹¶ä¿®å¤")
        return 1

if __name__ == "__main__":
    sys.exit(main())
EOF
```

## æ­¥éª¤ 5ï¼šè¿è¡Œå®Œæ•´çŽ¯å¢ƒæµ‹è¯•

```bash
# ç¡®ä¿è™šæ‹ŸçŽ¯å¢ƒå·²æ¿€æ´»
source .venv/bin/activate

# è¿è¡Œå®Œæ•´çŽ¯å¢ƒæµ‹è¯•
python test_full_environment.py
```

**é¢„æœŸæˆåŠŸè¾“å‡ºï¼š**

```
ðŸš€ PulseTrader å®Œæ•´çŽ¯å¢ƒæµ‹è¯•å¼€å§‹

è¿™ä¸ªæµ‹è¯•å°†éªŒè¯æ‚¨çš„å¼€å‘çŽ¯å¢ƒæ˜¯å¦å®Œå…¨é…ç½®æ­£ç¡®ã€‚

ðŸ§ª PythonçŽ¯å¢ƒ
==================================================
æµ‹è¯•: Pythonç‰ˆæœ¬
å‘½ä»¤: python --version
--------------------------------------------------
âœ… æˆåŠŸ
è¾“å‡º: Python 3.12.x
...

ðŸ“Š æµ‹è¯•ç»“æžœæ±‡æ€»
============================================================
PythonçŽ¯å¢ƒ           âœ… é€šè¿‡
é¡¹ç›®ç»“æž„             âœ… é€šè¿‡
Pythonæ¨¡å—           âœ… é€šè¿‡
ä»£ç è´¨é‡å·¥å…·         âœ… é€šè¿‡
ä»£ç è´¨é‡æ£€æŸ¥         âœ… é€šè¿‡
å•å…ƒæµ‹è¯•             âœ… é€šè¿‡
DockerçŽ¯å¢ƒ           âœ… é€šè¿‡
============================================================

ðŸŽ‰ æ­å–œï¼æ‰€æœ‰çŽ¯å¢ƒæµ‹è¯•éƒ½é€šè¿‡äº†ï¼
æ‚¨çš„PulseTraderå¼€å‘çŽ¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªã€‚

ðŸš€ çŽ°åœ¨æ‚¨å¯ä»¥ï¼š
  1. å¼€å§‹ç¬¬äºŒç« ï¼šæ•°æ®èŽ·å–ä¸Žå­˜å‚¨
  2. è¿è¡Œ 'make help' æŸ¥çœ‹å¯ç”¨å‘½ä»¤
  3. ä½¿ç”¨VS Codeå¼€å§‹å¼€å‘
```

## æ­¥éª¤ 6ï¼šéªŒè¯å¼€å‘å·¥ä½œæµ

```bash
# æµ‹è¯•ä»£ç æ ¼å¼åŒ–
make format

# æµ‹è¯•ä»£ç æ£€æŸ¥
make lint

# æµ‹è¯•å•å…ƒæµ‹è¯•
make test

# æ£€æŸ¥pre-commit hooks
pre-commit run --all-files
```

## å¸¸è§é—®é¢˜ä¸Žè§£å†³æ–¹æ¡ˆ

**Q1: Python æ¨¡å—å¯¼å…¥å¤±è´¥**

```bash
# æ£€æŸ¥Pythonè·¯å¾„
python -c "import sys; print(sys.path)"
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
pwd
# é‡æ–°å®‰è£…é¡¹ç›®
pip install -e .
```

**Q2: Docker æœåŠ¡å¯åŠ¨å¤±è´¥**

```bash
# æ£€æŸ¥DockeræœåŠ¡
sudo systemctl status docker
# é‡å¯Docker
sudo systemctl restart docker
# é‡æ–°å¯åŠ¨æœåŠ¡
docker-compose down && docker-compose up -d
```

**Q3: ä»£ç è´¨é‡æ£€æŸ¥å¤±è´¥**

```bash
# è‡ªåŠ¨ä¿®å¤æ ¼å¼é—®é¢˜
black src tests
isort src tests
# é‡æ–°è¿è¡Œæ£€æŸ¥
make check
```

**Q4: æµ‹è¯•å¤±è´¥**

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install pytest pytest-cov
# é‡æ–°è¿è¡Œæµ‹è¯•
make test
```

## æœ¬èŠ‚å°ç»“

æ­å–œï¼æ‚¨å·²ç»æˆåŠŸå®Œæˆäº†å¼€å‘å·¥å…·çš„å®Œæ•´é…ç½®å’ŒçŽ¯å¢ƒéªŒè¯ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å­¦ä¼šäº†ï¼š

1. âœ… å®Œå–„ VS Code å¼€å‘çŽ¯å¢ƒé…ç½®
2. âœ… è®¾ç½®ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·
3. âœ… åˆ›å»ºæµ‹è¯•åŸºç¡€è®¾æ–½
4. âœ… è¿›è¡Œå®Œæ•´çš„çŽ¯å¢ƒéªŒè¯
5. âœ… å»ºç«‹æ ‡å‡†åŒ–çš„å¼€å‘å·¥ä½œæµ

## ðŸŽ¯ ç¬¬ä¸€ç« å­¦ä¹ å®Œæˆ

çŽ°åœ¨æ‚¨å·²ç»å®Œæˆäº†ç¬¬ä¸€ç« çš„æ‰€æœ‰å­¦ä¹ å†…å®¹ï¼š

- âœ… **1.1** Python 3.12 å¼€å‘çŽ¯å¢ƒé…ç½®
- âœ… **1.2** ClickHouse æ•°æ®åº“å®‰è£…ä¸Žé…ç½®
- âœ… **1.3** é¡¹ç›®ç»“æž„åˆ›å»ºä¸ŽåŸºç¡€é…ç½®
- âœ… **1.4** å¼€å‘å·¥å…·ä¸ŽçŽ¯å¢ƒéªŒè¯

æ‚¨å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´ã€ä¸“ä¸šã€å¯æ‰©å±•çš„ A è‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿå¼€å‘çŽ¯å¢ƒï¼

## ðŸš€ ä¸‹ä¸€æ­¥ï¼šå¼€å§‹ç¬¬äºŒç« 

å‡†å¤‡å¥½è¿›å…¥æ•°æ®èŽ·å–ä¸Žå­˜å‚¨çš„å­¦ä¹ äº†å—ï¼Ÿ

**[â†’ å¼€å§‹ç¬¬äºŒç« ï¼šæ•°æ®èŽ·å–ä¸Žå­˜å‚¨](../02-ç¬¬äºŒç« /README.md)**

## ðŸ’¡ å¼€å‘å»ºè®®

1. **ä½¿ç”¨ Make å‘½ä»¤**: è¿è¡Œ `make help` æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
2. **ä»£ç è´¨é‡**: æäº¤ä»£ç å‰è¿è¡Œ `make check` è¿›è¡Œæ£€æŸ¥
3. **æµ‹è¯•é©±åŠ¨**: æ–°åŠŸèƒ½å¼€å‘æ—¶å…ˆå†™æµ‹è¯•
4. **æ–‡æ¡£ä¼˜å…ˆ**: é‡è¦å‡½æ•°å’Œç±»éƒ½è¦å†™æ–‡æ¡£å­—ç¬¦ä¸²
5. **ç‰ˆæœ¬æŽ§åˆ¶**: ä½¿ç”¨ Git è¿›è¡Œç‰ˆæœ¬æŽ§åˆ¶ï¼Œå®šæœŸæäº¤

## ðŸŽ‰ æ­å–œå®Œæˆç¬¬ä¸€ç« ï¼

æ‚¨å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ªçŽ°ä»£åŒ–çš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿå¼€å‘çŽ¯å¢ƒï¼ŒåŒ…å«ï¼š

- Python 3.12 + è™šæ‹ŸçŽ¯å¢ƒ
- ClickHouse + Redis æ•°æ®åº“
- ä¸“ä¸šçš„å¼€å‘å·¥å…·é“¾
- å®Œæ•´çš„é¡¹ç›®ç»“æž„
- ä»£ç è´¨é‡ä¿éšœä½“ç³»

çŽ°åœ¨æ‚¨å¯ä»¥å¼€å§‹çœŸæ­£çš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿå¼€å‘äº†ï¼
